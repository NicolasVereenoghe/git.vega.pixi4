var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(n,S,l){n instanceof String&&(n=String(n));for(var M=n.length,g=0;g<M;g++){var D=n[g];if(S.call(l,D,g,n))return{i:g,v:D}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(n,S,l){n!=Array.prototype&&n!=Object.prototype&&(n[S]=l.value)};
$jscomp.getGlobal=function(n){return"undefined"!=typeof window&&window===n?n:"undefined"!=typeof global&&null!=global?global:n};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(n,S,l,M){if(S){l=$jscomp.global;n=n.split(".");for(M=0;M<n.length-1;M++){var g=n[M];g in l||(l[g]={});l=l[g]}n=n[n.length-1];M=l[n];S=S(M);S!=M&&null!=S&&$jscomp.defineProperty(l,n,{configurable:!0,writable:!0,value:S})}};
$jscomp.polyfill("Array.prototype.find",function(n){return n?n:function(n,l){return $jscomp.findInternal(this,n,l).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(n){return $jscomp.SYMBOL_PREFIX+(n||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.iterator;n||(n=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[n]&&$jscomp.defineProperty(Array.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(n){var S=0;return $jscomp.iteratorPrototype(function(){return S<n.length?{done:!1,value:n[S++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(n){$jscomp.initSymbolIterator();n={next:n};n[$jscomp.global.Symbol.iterator]=function(){return this};return n};$jscomp.iteratorFromArray=function(n,S){$jscomp.initSymbolIterator();n instanceof String&&(n+="");var l=0,M={next:function(){if(l<n.length){var g=l++;return{value:S(g,n[g]),done:!1}}M.next=function(){return{done:!0,value:void 0}};return M.next()}};M[Symbol.iterator]=function(){return M};return M};
$jscomp.polyfill("Array.prototype.keys",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(n){return n})}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(n,l){return l})}},"es6","es3");
(function(n,S){function l(a,b){function c(){}c.prototype=a;a=new c;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function M(a){return a instanceof Array?function(){return D.iter(a)}:"function"==typeof a.iterator?g(a,a.iterator):a.iterator}function g(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=rb++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},
c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var D=function(){};D.__name__=!0;D.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a};D.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};D.remove=function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0};D.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var la=function(){};
la.__name__=!0;la.exists=function(a,b){for(a=M(a)();a.hasNext();){var c=a.next();if(b(c))return!0}return!1};la.foreach=function(a,b){for(a=M(a)();a.hasNext();){var c=a.next();if(!b(c))return!1}return!0};la.fold=function(a,b,c){for(a=M(a)();a.hasNext();){var d=a.next();c=b(d,c)}return c};la.find=function(a,b){for(a=M(a)();a.hasNext();){var c=a.next();if(b(c))return c}return null};var T=function(){this._animationFrameId=null;this.pixelRatio=1;this.autoResize=!0;this.legacy=this.roundPixels=this.forceFXAA=
this.antialias=this.transparent=!1;this.clearBeforeRender=!0;this.preserveDrawingBuffer=!1;this.backgroundColor=16777215;this.width=window.innerWidth;this.height=window.innerHeight;this.position="static"};T.__name__=!0;T.prototype={_setDefaultValues:function(){this._animationFrameId=null;this.pixelRatio=1;this.autoResize=!0;this.legacy=this.roundPixels=this.forceFXAA=this.antialias=this.transparent=!1;this.clearBeforeRender=!0;this.preserveDrawingBuffer=!1;this.backgroundColor=16777215;this.width=
window.innerWidth;this.height=window.innerHeight;this.position="static"},start:function(a,b,c){null==a&&(a="auto");null==c?(this.canvas=window.document.createElement("canvas"),this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.style.position=this.position):this.canvas=c;this.autoResize&&(window.onresize=g(this,this._onWindowResize));c={};c.width=this.width|0;c.height=this.height|0;c.view=this.canvas;c.backgroundColor=this.backgroundColor;c.resolution=this.pixelRatio;
c.antialias=this.antialias;c.forceFXAA=this.forceFXAA;c.autoResize=this.autoResize;c.transparent=this.transparent;c.clearBeforeRender=this.clearBeforeRender;c.preserveDrawingBuffer=this.preserveDrawingBuffer;c.roundPixels=this.roundPixels;c.legacy=this.legacy;null!=a&&"canvas"==a&&(c.forceCanvas=!0);this.app=new PIXI.Application(c);this.stage=this.app.stage;this.renderer=this.app.renderer;null==b?window.document.body.appendChild(this.app.view):b.appendChild(this.app.view);this.app.ticker.add(g(this,
this._onRequestAnimationFrame))},pauseRendering:function(){this.app.stop()},resumeRendering:function(){this.app.start()},_onWindowResize:function(a){this.width=window.innerWidth;this.height=window.innerHeight;this.app.renderer.resize(this.width,this.height);this.canvas.style.width=this.width+"px";this.canvas.style.height=this.height+"px";if(null!=this.onResize)this.onResize()},_onRequestAnimationFrame:function(){if(null!=this.onUpdate)this.onUpdate(this.app.ticker.deltaTime)},addStats:function(){if(null!=
window.Perf){switch(this.app.renderer.type){case 1:var a="WEBGL";break;case 2:a="CANVAS";break;default:a="UNKNOWN"}(new q).addInfo(a+" - "+this.pixelRatio)}},__class__:T};var h=function(){this._fps=-1;this._debugCtrLine=0;this._debugContainer=this._debugSwitchBt=this._debugClsBt=null;this._tmpW=this._tmpH=-1;this._borders=null;this.BORDER=2E3;this._EXT_HEIGHT=720;this._EXT_WIDTH=1136;this._MIN_HEIGHT=640;this._MIN_WIDTH=960;this.isFPSForced=!1;this.tmpFPS=-1;this.debugFontSize=12;this.debugMotifs=
null;this.debugLvl="WARNING";this.debugRGB="#444444";this.debug=this.debugVisibleInit=!1;T.call(this);h.instance=this;this.vars={};this.init()};h.__name__=!0;h.__super__=T;h.prototype=l(T.prototype,{getHit:function(){return this._hit},getContent:function(){return this._content},traceDebug:function(a,b){null==b&&(b=!1);console.log(a);if(this.debug){if(!b&&!this.detectDebugMotifIn(a))if("INFO"==this.debugLvl){if(-1==a.indexOf("INFO")&&-1==a.indexOf("WARNING")&&-1==a.indexOf("ERROR"))return}else if("WARNING"==
this.debugLvl){if(-1==a.indexOf("WARNING")&&-1==a.indexOf("ERROR"))return}else if("ERROR"==this.debugLvl&&-1==a.indexOf("ERROR"))return;null==this._debugContainer&&(this._debugContainer=this._container.addChild(new PIXI.Container),this._debugContainer.x=this._screenRect.x,this._debugContainer.y=this._screenRect.y,this._debugContainer.visible=this.debugVisibleInit,this._debugContainer.interactiveChildren=!1,this._debugSwitchBt=this._container.addChild(new PIXI.Container),this._debugSwitchBt.addChild(new PIXI.Graphics),
e.__cast(this._debugSwitchBt.getChildAt(0),PIXI.Graphics).beginFill(0,0),e.__cast(this._debugSwitchBt.getChildAt(0),PIXI.Graphics).drawRect(0,0,25,25),e.__cast(this._debugSwitchBt.getChildAt(0),PIXI.Graphics).endFill(),this._debugSwitchBt.x=this._screenRect.x,this._debugSwitchBt.y=this._screenRect.y,t.setQuickBt(this._debugSwitchBt,g(this,this.onBtSwitchTrace)),this._debugClsBt=this._container.addChild(new PIXI.Container),this._debugClsBt.addChild(new PIXI.Graphics),e.__cast(this._debugClsBt.getChildAt(0),
PIXI.Graphics).beginFill(0,0),e.__cast(this._debugClsBt.getChildAt(0),PIXI.Graphics).drawRect(0,-25,25,25),e.__cast(this._debugClsBt.getChildAt(0),PIXI.Graphics).endFill(),this._debugClsBt.x=this._screenRect.x,this._debugClsBt.y=this._screenRect.y+this._screenRect.height,t.setQuickBt(this._debugClsBt,g(this,this.onBtClsTrace)));a=new PIXI.Text(a,{fontFamily:"Arial",fontSize:this.debugFontSize,fill:this.debugRGB});this._debugContainer.addChild(a);this._debugCtrLine++;a.y=-(this._debugCtrLine-1)*this.debugFontSize;
for(this._debugContainer.y=this._screenRect.y+(this._debugCtrLine-1)*this.debugFontSize;this._debugContainer.children.length>Math.ceil(this._EXT_HEIGHT/this.debugFontSize);)this._debugContainer.removeChildAt(0).destroy()}},onBtSwitchTrace:function(a){this._debugContainer.visible=!this._debugContainer.visible},onBtClsTrace:function(a){for(this._debugCtrLine=0;0<this._debugContainer.children.length;)this._debugContainer.removeChildAt(0).destroy()},detectDebugMotifIn:function(a){if(null!=this.debugMotifs&&
0<this.debugMotifs.length)for(var b=0,c=this.debugMotifs;b<c.length;){var d=c[b];++b;if(-1!=a.indexOf(d))return!0}return!1},getScreenRectExt:function(){return new PIXI.Rectangle(-this._EXT_WIDTH/2,-this._EXT_HEIGHT/2,this._EXT_WIDTH,this._EXT_HEIGHT)},getScreenRectMin:function(){return new PIXI.Rectangle(-this._MIN_WIDTH/2,-this._MIN_HEIGHT/2,this._MIN_WIDTH,this._MIN_HEIGHT)},getScreenRect:function(){return this._screenRect},setFPS:function(a){this.tmpFPS=a;this.isFPSForced||this.set_fps(a)},restaureFPS:function(){this.isFPSForced=
!1;this.set_fps(this.tmpFPS)},forceFPS:function(a){this.isFPSForced=!0;this.set_fps(a)},get_fps:function(){return this._fps},set_fps:function(a){return this._fps=a},reload:function(){if("undefined"!=typeof window){try{this.traceDebug("WARNING : ApplicationMatchSize::reload"),PIXI.utils.destroyTextureCache()}catch(a){this.traceDebug("ERROR : ApplicationMatchSize::reload : clear textures failure")}this.stage.interactiveChildren=!1;this.stage.interactive=!1;window.document.location.reload(!0);return!0}this.traceDebug("ERROR : ApplicationMatchSize::reload : no browser, fail");
return!1},refreshRender:function(){this.renderer.resize(1,1);this._onWindowResize(null)},antiFlicker:function(){this.traceDebug("INFO : ApplicationMatchSize::antiFlicker",!0);this.renderer.resize(this.width,this.height)},refreshInteraction:function(){this.pauseRendering();this.resumeRendering()},init:function(){if("undefined"!=typeof window){var a=window.location.search.substring(1).split("&");for(var b=0;b<a.length;){var c=a[b];++b;c=c.split("=");this.vars[c[0]]=c[1]}}this.backgroundColor=this.getStageBGColor();
this.start();this._hit=this.stage.addChild(new PIXI.Container);a=this._hit.addChild(new PIXI.Graphics);a.beginFill(0,0);a.drawRect(-100,-100,200,200);a.endFill();this._hit.interactive=!0;this._container=new PIXI.Container;this.stage.addChild(this._container);this._bg=new PIXI.Graphics;this._bg.beginFill(this.getBGColor());this._bg.drawRect(-this._EXT_WIDTH/2,-this._EXT_HEIGHT/2,this._EXT_WIDTH,this._EXT_HEIGHT);this._bg.endFill();this._container.addChild(this._bg);this._content=new PIXI.Container;
this._container.addChild(this._content);this.onResize=g(this,this.updateSize);this.updateSize()},getBGColor:function(){return 16777215},getStageBGColor:function(){return 0},_onWindowResize:function(a){var b=window.innerWidth,c=window.innerHeight;a=null==a;if(0>this._tmpW||Math.round(b)!=Math.round(this._tmpW)&&0!=window.outerWidth)this._tmpW=this.width=b,a=!0;if(0>this._tmpH||Math.round(c)!=Math.round(this._tmpH)&&0!=window.outerHeight)this._tmpH=this.height=c,a=!0;if(a&&(this.app.renderer.resize(this.width,
this.height),this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",null!=this.onResize))this.onResize()},updateSize:function(){var a=this.width,b=a*this._MIN_HEIGHT/this._MIN_WIDTH;b>this.height&&(a=this.height*this._MIN_WIDTH/this._MIN_HEIGHT);this._baseScale=a/this._MIN_WIDTH;a=Math.min(this.width/this._baseScale,this._EXT_WIDTH);b=Math.min(this.height/this._baseScale,this._EXT_HEIGHT);this._screenRect=new PIXI.Rectangle(-a/2,-b/2,a,b);this._container.scale.x=this._baseScale;
this._container.scale.y=this._baseScale;this._container.x=this.width/2;this._container.y=this.height/2;this._hit.scale.x=this._baseScale;this._hit.scale.y=this._baseScale;this._hit.x=this.width/2;this._hit.y=this.height/2;e.__cast(this._hit.getChildAt(0),PIXI.Graphics).width=this.width/this._baseScale;e.__cast(this._hit.getChildAt(0),PIXI.Graphics).height=this.height/this._baseScale;null==this._borders&&(this._borders=new PIXI.Graphics,this._borders.beginFill(this.backgroundColor),this._borders.drawRect(-this._EXT_WIDTH/
2-this.BORDER,-this._EXT_HEIGHT/2-this.BORDER,this.BORDER,this._EXT_HEIGHT+2*this.BORDER),this._borders.drawRect(-this._EXT_WIDTH/2-this.BORDER,-this._EXT_HEIGHT/2-this.BORDER,this._EXT_WIDTH+2*this.BORDER,this.BORDER),this._borders.drawRect(-this._EXT_WIDTH/2-this.BORDER,this._EXT_HEIGHT/2,this._EXT_WIDTH+2*this.BORDER,this.BORDER),this._borders.drawRect(this._EXT_WIDTH/2,-this._EXT_HEIGHT/2-this.BORDER,this.BORDER,this._EXT_HEIGHT+2*this.BORDER),this._borders.endFill(),this._container.addChild(this._borders));
this.traceDebug("INFO : ApplicationMatchSize::updateSize : scale="+Math.round(100*this._baseScale)/100+" ; screen="+Math.round(this._screenRect.width)+"x"+Math.round(this._screenRect.height)+" ; stage="+this.width+"x"+this.height,!0);null!=this._debugContainer&&(this._debugContainer.x=this._screenRect.x,this._debugContainer.y=this._screenRect.y+(this._debugCtrLine-1)*this.debugFontSize,this._debugSwitchBt.x=this._screenRect.x,this._debugSwitchBt.y=this._screenRect.y,this._debugClsBt.x=this._screenRect.x,
this._debugClsBt.y=this._screenRect.y+this._screenRect.height);Z.getInstance().broadcastResize()},__class__:h,__properties__:{set_fps:"set_fps",get_fps:"get_fps"}});var ya=function(){h.call(this);C.getInstance(.5);new P;N.getInstance().addIterator(g(this,this.startShell));fa.getInstance()};ya.__name__=!0;ya.main=function(){new ya};ya.__super__=h;ya.prototype=l(h.prototype,{init:function(){this.debugVisibleInit=this.debug=this.transparent=this.legacy=!0;this.debugMotifs=["Snd"];this.setFPS(60);this.version=
"0";h.prototype.init.call(this);this.traceDebug(this.version+";"+PIXI.VERSION+";"+this.renderer.type,!0)},startShell:function(a){N.getInstance().remIterator(g(this,this.startShell));this.shell=new Ja;this.shell.init(this.getContent(),new W("assets.json",null,"NO-CACHE"),new W("local.xml",null,"NO-CACHE"),{"Sadana Square":new W("SadanaSquare.css",null,"NO-VERSION")})},__class__:ya});Math.__name__=!0;var q=n.Perf=function(a,b){null==b&&(b=0);null==a&&(a="TR");var c=this;this._divElements=[];this._perfObj=
window.performance;null!=E.field(this._perfObj,"memory")&&(this._memoryObj=E.field(this._perfObj,"memory"));this._memCheck=null!=this._perfObj&&null!=this._memoryObj&&0<this._memoryObj.totalJSHeapSize;this._pos=a;this._offset=b;this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=this._fpsMin=60;this._startTime=null!=this._perfObj&&null!=(y=this._perfObj,g(y,y.now))?this._perfObj.now():(new Date).getTime();
this._prevTime=-q.MEASUREMENT_INTERVAL;this._createFpsDom();this._createMsDom();this._memCheck&&this._createMemoryDom();var d=0,f=null;null!=(y=window,g(y,y.requestAnimationFrame))?this.RAF=(y=window,g(y,y.requestAnimationFrame)):this.RAF=function(a){var b=null!=c._perfObj&&null!=(y=c._perfObj,g(y,y.now))?c._perfObj.now():(new Date).getTime(),e=Math.max(0,16-(b-d))|0;f=qa.delay(function(){a(b+e)},e);d=b+e;return f};null!=(y=window,g(y,y.cancelAnimationFrame))?this.CAF=(y=window,g(y,y.cancelAnimationFrame)):
this.CAF=function(a){null!=a&&a.stop()};null!=this.RAF&&(this._raf=this.RAF.apply(window,[g(this,this._tick)]))};q.__name__=!0;q.prototype={_init:function(){this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=this._fpsMin=60;this._startTime=null!=this._perfObj&&null!=(y=this._perfObj,g(y,y.now))?this._perfObj.now():(new Date).getTime();this._prevTime=-q.MEASUREMENT_INTERVAL},_now:function(){return null!=
this._perfObj&&null!=(y=this._perfObj,g(y,y.now))?this._perfObj.now():(new Date).getTime()},_tick:function(a){var b=null!=this._perfObj&&null!=(y=this._perfObj,g(y,y.now))?this._perfObj.now():(new Date).getTime();this._ticks++;null!=this._raf&&b>this._prevTime+q.MEASUREMENT_INTERVAL&&(this.currentMs=Math.round(b-this._startTime),this.ms.innerHTML="MS: "+this.currentMs,this.currentFps=Math.round(1E3*this._ticks/(b-this._prevTime)),60<this.currentFps&&(this.currentFps=60),0<this.currentFps&&a>q.DELAY_TIME&&
(this._measureCount++,this._totalFps+=this.currentFps,this.lowFps=this._fpsMin=Math.min(this._fpsMin,this.currentFps),this._fpsMax=Math.max(this._fpsMax,this.currentFps),this.avgFps=Math.round(this._totalFps/this._measureCount)),this.fps.innerHTML="FPS: "+this.currentFps+" ("+this._fpsMin+"-"+this._fpsMax+")",this.fps.style.backgroundColor=30<=this.currentFps?q.FPS_BG_CLR:15<=this.currentFps?q.FPS_WARN_BG_CLR:q.FPS_PROB_BG_CLR,this._prevTime=b,this._ticks=0,this._memCheck&&(this.currentMem=this._getFormattedSize(this._memoryObj.usedJSHeapSize,
2),this.memory.innerHTML="MEM: "+this.currentMem));this._startTime=b;null!=this._raf&&(this._raf=this.RAF.apply(window,[g(this,this._tick)]))},_createDiv:function(a,b){null==b&&(b=0);var c=window.document.createElement("div");c.id=a;c.className=a;c.style.position="absolute";switch(this._pos){case "BL":c.style.left=this._offset+q.POS_SUFFIX;c.style.bottom=(this._memCheck?48:32)-b+q.POS_SUFFIX;break;case "BR":c.style.right=this._offset+q.POS_SUFFIX;c.style.bottom=(this._memCheck?48:32)-b+q.POS_SUFFIX;
break;case "TL":c.style.left=this._offset+q.POS_SUFFIX;c.style.top=b+q.POS_SUFFIX;break;case "TR":c.style.right=this._offset+q.POS_SUFFIX,c.style.top=b+q.POS_SUFFIX}c.style.width="80px";c.style.height="12px";c.style.lineHeight="12px";c.style.padding="2px";c.style.fontFamily=q.FONT_FAMILY;c.style.fontSize="9px";c.style.fontWeight="bold";c.style.textAlign="center";window.document.body.appendChild(c);this._divElements.push(c);return c},_createFpsDom:function(){this.fps=this._createDiv("fps");this.fps.style.backgroundColor=
q.FPS_BG_CLR;this.fps.style.zIndex="995";this.fps.style.color=q.FPS_TXT_CLR;this.fps.innerHTML="FPS: 0"},_createMsDom:function(){this.ms=this._createDiv("ms",16);this.ms.style.backgroundColor=q.MS_BG_CLR;this.ms.style.zIndex="996";this.ms.style.color=q.MS_TXT_CLR;this.ms.innerHTML="MS: 0"},_createMemoryDom:function(){this.memory=this._createDiv("memory",32);this.memory.style.backgroundColor=q.MEM_BG_CLR;this.memory.style.color=q.MEM_TXT_CLR;this.memory.style.zIndex="997";this.memory.innerHTML="MEM: 0"},
_getFormattedSize:function(a,b){null==b&&(b=0);if(0==a)return"0";b=Math.pow(10,b);var c=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a*b/Math.pow(1024,c))/b+" "+["Bytes","KB","MB","GB","TB"][c]},addInfo:function(a){this.info=this._createDiv("info",this._memCheck?48:32);this.info.style.backgroundColor=q.INFO_BG_CLR;this.info.style.color=q.INFO_TXT_CLR;this.info.style.zIndex="998";this.info.innerHTML=a},clearInfo:function(){null!=this.info&&(window.document.body.removeChild(this.info),this.info=
null)},destroy:function(){this.CAF.apply(window,[this._raf]);this._memoryObj=this._perfObj=this._raf=null;null!=this.fps&&(window.document.body.removeChild(this.fps),this.fps=null);null!=this.ms&&(window.document.body.removeChild(this.ms),this.ms=null);null!=this.memory&&(window.document.body.removeChild(this.memory),this.memory=null);this.clearInfo();this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=
this._fpsMin=60;this._startTime=null!=this._perfObj&&null!=(y=this._perfObj,g(y,y.now))?this._perfObj.now():(new Date).getTime();this._prevTime=-q.MEASUREMENT_INTERVAL},hide:function(){for(var a=0,b=this._divElements;a<b.length;){var c=b[a];++a;c.style.visibility="hidden"}},show:function(){for(var a=0,b=this._divElements;a<b.length;){var c=b[a];++a;c.style.visibility="visible"}},_cancelRAF:function(){this.CAF.apply(window,[this._raf]);this._raf=null},__class__:q};var E=function(){};E.__name__=!0;
E.field=function(a,b){try{return a[b]}catch(c){return null}};E.getProperty=function(a,b){var c;if(null==a)return null;var d=a.__properties__?c=a.__properties__["get_"+b]:!1;return d?a[c]():a[b]};E.setProperty=function(a,b,c){var d;var f=a.__properties__?d=a.__properties__["set_"+b]:!1;if(f)a[d](c);else a[b]=c};E.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};var H=function(){};H.__name__=
!0;H.string=function(a){return e.__string_rec(a,"")};H.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=D.cca(a,1)&&88!=D.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};var Xa=function(){};Xa.__name__=!0;Xa.replace=function(a,b,c){return a.split(b).join(c)};var Ya=function(){};Ya.__name__=!0;Ya.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);
case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);case 11:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);case 12:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],
b[10],b[11]);case 13:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12]);case 14:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13]);default:throw new z("Too many arguments");}};var F={__name__:!0,gt:function(a,b){var c=0>a;return c!=0>b?c:a>b},gte:function(a,b){var c=0>a;return c!=0>b?c:a>=b},toFloat:function(a){return 0>a?4294967296+a:a+0}},Ka=function(a){this.symbolId=a};Ka.__name__=!0;Ka.prototype={__class__:Ka};var Za=function(){};
Za.__name__=!0;Za.prototype={__class__:Za};var $a=function(a,b,c){this.position=0;this.dirty=this.fullyGenerated=!1;this.changed=0;this.labelsToFire=[];this.childPlayers=new U;this.createdChildren=new U;this.currentChildrenKey=new U;this.STATE_STOPPED="stopped";this.STATE_LOOPING="looping";this.STATE_PLAYING="playing";this.independantTimeline=this.independantControl=!0;this.prevPosition=-1;this.elapsed=this.previousElapsed=this.advanced=0;this.symbol=a;this.movie=b;this.resolution=c;c=0;for(var d=
a.layers;c<d.length;){var f=d[c];++c;b.createLayer(f)}this.state=this.STATE_LOOPING;this.advanceTime(0);c=0;for(a=a.layers;c<a.length;)d=a[c],++c,b.setMask(d)};$a.__name__=!0;$a.prototype={get_labels:function(){var a=this.symbol.labels;return new G(a,a.arrayKeys())},getDisplayKey:function(a,b){null==b&&(b=0);var c=this.symbol.getLayer(a);if(null==c)throw new z("Layer "+a+" does not exist.");a=c.getKeyframeForFrame(b);if(null==a)throw new z("Keyframe does not exist at index "+H.string(F.toFloat(b)));
this.createChildIfNessessary(a);return a.displayKey},reset:function(){this.previousElapsed=this.elapsed=0;this.prevPosition=-1},getElapsedModDuration:function(){var a=this.elapsed,b=this.symbol.duration;0>a&&(a=a%b+b);a>=b&&(a%=b);return a},getPositionEnd:function(){return V.getTimeAtFrame(this.symbol.totalFrames-1,this.symbol.library.frameTime)},get_position:function(){var a=this.getElapsedModDuration();if(this.state==this.STATE_PLAYING||e.__instanceof(this.movie,m)&&!e.__cast(this.movie,m).loop){var b=
this.getPositionEnd();return this.elapsed>=b||a>b?b:a}return a},get_totalFrames:function(){return this.symbol.totalFrames},play:function(){this.setState(this.STATE_PLAYING);return this},loop:function(){this.setState(this.STATE_LOOPING);return this},stop:function(){this.setState(this.STATE_STOPPED);return this},goToLabel:function(a){if(!this.labelExists(a))throw new z("Symbol "+this.symbol.name+" does not have label "+a+".");this.set_currentFrame(this.getLabelFrame(a));this.fireHitFrames(this.getLabelFrame(a));
return this},goToFrame:function(a){this.set_currentFrame(a);this.fireHitFrames(a);return this},fireHitFrames:function(a){this.changed++;var b=this.changed;a=V.getTimeAtFrame(a,this.symbol.library.frameTime);for(var c=0,d=this.symbol.layers;c<d.length;){var f=d[c];++c;var e=0;for(f=f.keyframes;e<f.length;){var g=f[e];++e;if(b!=this.changed)return;null!=g.label&&g.timeInside(a)&&this.movie.labelHit(g.label)}}},goToPosition:function(a){this.previousElapsed=this.elapsed=a;this.clearLabels();return this},
get_playing:function(){return this.state==this.STATE_PLAYING},get_looping:function(){return this.state==this.STATE_LOOPING},get_stopped:function(){return this.state==this.STATE_STOPPED},getLabelFrame:function(a){if(!this.labelExists(a))throw new z("Symbol "+this.symbol.name+" does not have label "+a+".");var b=this.symbol.labels;return(null!=p[a]?b.getReserved(a):b.h[a]).keyframe.index},get_currentFrame:function(){var a=this.get_position(),b=Math.round(a/this.symbol.library.frameTime);for(F.gte(b,
this.symbol.totalFrames)&&(b=this.symbol.totalFrames-1);a<V.getTimeAtFrame(b,this.symbol.library.frameTime);)--b;return b},set_currentFrame:function(a){this.goToPosition(V.getTimeAtFrame(a,this.symbol.library.frameTime));return a},labelExists:function(a){var b=this.symbol.labels;return null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},advanceTime:function(a){if(this.state!=this.STATE_STOPPED)for(this.elapsed+=a;0>this.elapsed;)this.elapsed+=this.symbol.duration,this.previousElapsed+=this.symbol.duration;
this.advanced+=a;this.state!=this.STATE_STOPPED&&this.fireLabels();this.render()},clearLabels:function(){for(;0<this.labelsToFire.length;)this.labelsToFire.pop()},fireLabels:function(){if(null!=this.symbol.firstLabel&&!(this.previousElapsed>this.elapsed)){for(var a=this.previousElapsed<=this.elapsed?this.symbol.firstLabel:this.symbol.lastLabel,b=!0;b;)a.keyframe.time>this.previousElapsed%this.symbol.duration?b=!1:(F.gte(a.keyframe.index,a.next.keyframe.index)&&(b=!1),a=a.next);for(b=a;null!=a;)a.keyframe.insideRangeStart(this.previousElapsed%
this.symbol.duration,this.elapsed%this.symbol.duration)&&this.state!=this.STATE_STOPPED&&this.labelsToFire.push(a),a=a.next,a==b&&(a=null);for(;0<this.labelsToFire.length;)a=this.labelsToFire.shift(),this.movie.labelPassed(a)}},render:function(){var a=!0,b=null,c=-1,d=-1;if(this.state==this.STATE_PLAYING){var f=this.getPositionEnd();this.get_position()==f&&(this.elapsed=f,this.stop(),this.movie.onAnimationComplete())}this.get_position()!=this.prevPosition&&(0>this.prevPosition||F.gt(this.symbol.totalFrames,
1))?this.prevPosition=this.get_position():a=!1;f=0;for(var g=this.symbol.layers;f<g.length;){var h=g[f];++f;var r=h.getKeyframeForTime(this.get_position());if(1==r.isEmpty)this.removeChildIfNessessary(r);else if(0==r.isEmpty){if(a){c=this.getInterpolation(r,this.get_position());b=r.next;b.isEmpty&&(b=r);if(r.tintColor!=b.tintColor){var k=r.tintColor;d=b.tintColor;var p=k>>16&255,u=k>>8&255;k&=255;d=Math.round(p+((d>>16&255)-p)*c)<<16|Math.round(u+((d>>8&255)-u)*c)<<8|Math.round(k+((d&255)-k)*c)}else d=
r.tintColor;this.currentChildrenKey.h[h.__id__]!=r.displayKey&&(this.createChildIfNessessary(r),this.removeChildIfNessessary(r),this.addChildIfNessessary(r))}e.__instanceof(r.symbol,za)&&(h=this.movie.getChildPlayer(r),h.independantTimeline?h.advanceTime(this.advanced):(h.elapsed=this.get_position(),h.render()));a&&this.movie.renderFrame(r,r.location.x+(b.location.x-r.location.x)*c,r.location.y+(b.location.y-r.location.y)*c,r.scale.x+(b.scale.x-r.scale.x)*c,r.scale.y+(b.scale.y-r.scale.y)*c,r.skew.x+
(b.skew.x-r.skew.x)*c,r.skew.y+(b.skew.y-r.skew.y)*c,r.alpha+(b.alpha-r.alpha)*c,r.tintMultiplier+(b.tintMultiplier-r.tintMultiplier)*c,d)}}this.advanced=0;this.previousElapsed=this.elapsed},createChildIfNessessary:function(a){a.isEmpty||null!=this.createdChildren.h.__keys__[a.displayKey.__id__]!=0||(this.movie.createFlumpChild(a.displayKey),this.createdChildren.set(a.displayKey,!0))},removeChildIfNessessary:function(a){null!=this.currentChildrenKey.h.__keys__[a.layer.__id__]&&(this.movie.removeFlumpChild(a.layer,
a.displayKey),this.currentChildrenKey.remove(a.layer))},addChildIfNessessary:function(a){a.isEmpty||(this.currentChildrenKey.set(a.layer,a.displayKey),this.movie.addFlumpChild(a.layer,a.displayKey))},setState:function(a){this.state=a;for(var b=0,c=this.symbol.layers;b<c.length;){var d=c[b];++b;d=d.getKeyframeForTime(this.get_position());this.createChildIfNessessary(d);e.__instanceof(d.symbol,za)&&(d=this.movie.getChildPlayer(d),0==d.independantControl&&d.setState(a))}this.advanceTime(0)},timeForLabel:function(a){var b=
this.symbol.labels;return(null!=p[a]?b.getReserved(a):b.h[a]).keyframe.time},getInterpolation:function(a,b){if(0==a.tweened)return 0;b=(b-a.time)/a.duration;a=a.ease;if(0!=a){if(0>a){var c=1-b;c=1-c*c;a=-a}else c=b*b;b=a*c+(1-a)*b}return b},__class__:$a,__properties__:{set_currentFrame:"set_currentFrame",get_currentFrame:"get_currentFrame",get_stopped:"get_stopped",get_looping:"get_looping",get_playing:"get_playing",get_totalFrames:"get_totalFrames",get_position:"get_position",get_labels:"get_labels"}};
var La=function(a,b){null==b&&(b=1);this.color=a;this.multiplier=b;this.uniforms={color:{type:"v3",value:this.hex2v3(this.color)},multiplier:{type:"1f",value:this.multiplier}};PIXI.Filter.call(this,null,this.getFragmentSrc(),this.uniforms)};La.__name__=!0;La.__super__=PIXI.Filter;La.prototype=l(PIXI.Filter.prototype,{getFragmentSrc:function(){return"precision mediump float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform vec3 color;uniform float multiplier;void main () { gl_FragColor = texture2D(uSampler, vTextureCoord);gl_FragColor.r = (color.r*multiplier+gl_FragColor.r*(1.0-multiplier)) * gl_FragColor.a;gl_FragColor.g = (color.g*multiplier+gl_FragColor.g*(1.0-multiplier)) * gl_FragColor.a;gl_FragColor.b = (color.b*multiplier+gl_FragColor.b*(1.0-multiplier)) * gl_FragColor.a;}"},
hex2v3:function(a){return{x:F.toFloat(a>>>16&255)/F.toFloat(255),y:F.toFloat(a>>>8&255)/F.toFloat(255),z:F.toFloat(a&255)/F.toFloat(255)}},update:function(a,b){null==b&&(b=1);a=this.color=a;this.uniforms.color.value=this.hex2v3(a);"number"!=typeof this.uniforms.multiplier&&(this.uniforms.multiplier.value=this.multiplier=b)},__class__:La});var V=function(a){this.atlases=[];this.sprites=new A;this.movies=new A;this.resolution=a};V.__name__=!0;V.create=function(a,b){var c=new A,d=new A,f=new V(b);f.sprites=
c;f.movies=d;f.framerate=F.toFloat(a.frameRate);f.frameTime=1E3/f.framerate;f.md5=a.md5;for(var g=[],h=null,r=0,k=a.textureGroups;r<k.length;){var n=k[r];++r;F.toFloat(n.scaleFactor)>=b&&null==h&&(h=n)}null==h&&(h=a.textureGroups[a.textureGroups.length-1]);r=0;for(h=h.atlases;r<h.length;)k=h[r],++r,f.atlases.push(k),g.push(k);for(h=0;h<g.length;)for(k=g[h],++h,r=0,k=k.textures;r<k.length;){var u=k[r];++r;new ab(u.rect[0],u.rect[1],u.rect[2],u.rect[3]);var B=new da(u.origin[0],u.origin[1]);n=new Ea;
n.name=u.symbol;n.data=u.data;n.baseClass=u.baseClass;n.origin=B;n.texture=u.symbol;u=n.name;null!=p[u]?c.setReserved(u,n):c.h[u]=n}g=new U;h=0;for(a=a.movies;h<a.length;){n=a[h];++h;r=new za;r.name=n.id;r.data=n.data;r.baseClass=n.baseClass;r.library=f;k=0;for(n=n.layers;k<n.length;){var q=n[k];++k;u=new bb(q.name);u.movie=r;u.mask=q.mask;var t=null;B=0;for(q=q.keyframes;B<q.length;){var m=q[B];++B;var l=new cb;l.prev=t;null!=t&&(t.next=l);l.layer=u;l.numFrames=m.duration;t=f.frameTime;l.duration=
F.toFloat(m.duration)*t;l.index=m.index;l.time=V.getTimeAtFrame(l.index,f.frameTime);null==m.ref?l.isEmpty=!0:(l.isEmpty=!1,l.symbolId=m.ref,l.pivot=null==m.pivot?new da(0,0):new da(m.pivot[0]*b,m.pivot[1]*b),l.location=null==m.loc?new da(0,0):new da(m.loc[0]*b,m.loc[1]*b),l.tweened=0==m.tweened?!1:!0,l.symbol=null,l.scale=null==m.scale?new da(1,1):new da(m.scale[0],m.scale[1]),l.skew=null==m.skew?new da(0,0):new da(m.skew[0],m.skew[1]),l.alpha=null==m.alpha?1:m.alpha,l.tintMultiplier=null==m.tint?
0:m.tint[0],l.tintColor=null==m.tint?0:H.parseInt(Xa.replace(e.__cast(m.tint[1],String),"#","0x")),l.data=m.data,l.ease=null==m.ease?0:m.ease);0==u.keyframes.length&&(u.firstKeyframe=l);if(null!=m.label){l.label=new Aa;l.label.keyframe=l;l.label.name=m.label;t=l.label.name;var v=l.label,x=r.labels;null!=p[t]?x.setReserved(t,v):x.h[t]=v}g.set(l,m.ref);u.keyframes.push(l);t=l}u.lastKeyframe=u.keyframes[u.keyframes.length-1];u.keyframes[0].prev=u.lastKeyframe;u.lastKeyframe.next=u.keyframes[0];r.layers.push(u);
if(!la.foreach(u.keyframes,function(){return function(a){return a.isEmpty}}())){B=0;for(q=u.keyframes;B<q.length;)if(m=[q[B]],++B,la.exists(u.keyframes,function(a){return function(b){return 0==b.isEmpty?b!=a[0]:!1}}(m))){for(l=m[0].prev;l.isEmpty;)l=l.prev;m[0].prevNonEmptyKeyframe=l;for(l=m[0].next;l.isEmpty;)l=l.next;m[0].nextNonEmptyKeyframe=l}else m[0].prevNonEmptyKeyframe=m[0],m[0].nextNonEmptyKeyframe=m[0];u=la.find(u.keyframes,function(){return function(a){return 0==a.isEmpty}}());null!=u&&
(u.displayKey=new Ka(u.symbolId));for(B=u.nextNonEmptyKeyframe;B!=u;)B.displayKey=B.symbolId==B.prevNonEmptyKeyframe.symbolId?B.prevNonEmptyKeyframe.displayKey:new Ka(B.symbolId),B=B.nextNonEmptyKeyframe}}k=function(){return function(a,b){a=a.lastKeyframe.index+a.lastKeyframe.numFrames;return F.gt(a,b)?a:b}}();r.totalFrames=la.fold(r.layers,k,0);k=f.frameTime;r.duration=F.toFloat(r.totalFrames)*k;k=[];n=0;for(u=r.layers;n<u.length;)for(q=u[n],++n,B=0,q=q.keyframes;B<q.length;)m=q[B],++B,null!=m.label&&
k.push(m.label);I.sort(k,V.sortLabel);n=0;for(u=k.length;n<u;)q=n++,B=q+1,B>=k.length&&(B=0),q=k[q],B=k[B],q.next=B,B.prev=q;r.firstLabel=k[0];r.lastLabel=k[k.length-1];k=r.name;null!=p[k]?d.setReserved(k,r):d.h[k]=r}for(b=g.keys();b.hasNext();)h=b.next(),a=g.h[h.__id__],h.symbol=null!=(null!=p[a]?c.getReserved(a):c.h[a])?null!=p[a]?c.getReserved(a):c.h[a]:null!=p[a]?d.getReserved(a):d.h[a];return f};V.getTimeAtFrame=function(a,b){return Math.floor(a*b*10)/10};V.sortLabel=function(a,b){return F.gt(b.keyframe.index,
a.keyframe.index)?-1:F.gt(a.keyframe.index,b.keyframe.index)?1:0};V.prototype={__class__:V};var cb=function(){};cb.__name__=!0;cb.prototype={timeInside:function(a){return this.time<=a?this.time+this.duration>a:!1},rangeInside:function(a,b){return this.timeInside(a)?this.timeInside(b):!1},rangeIntersect:function(a,b){return this.timeInside(a)?!0:this.timeInside(b)},insideRangeStart:function(a,b){return a<=b?this.time>a?this.time<=b:!1:this.time>a?!0:this.time<=b},insideRangeEnd:function(a,b){return a==
b&&b==this.time+this.duration?!0:a>b?b<=this.time+this.duration?a>this.time+this.duration:!1:b<=this.time+this.duration?!0:a>this.time+this.duration},__class__:cb};var Aa=function(){};Aa.__name__=!0;Aa.prototype={__class__:Aa};var bb=function(a){this.keyframes=[];this.name=a};bb.__name__=!0;bb.prototype={getKeyframeForFrame:function(a){for(var b=0,c=this.keyframes;b<c.length;){var d=c[b];++b;if(F.gte(a,d.index)&&F.gt(d.index+d.numFrames,a))return d}return null},getKeyframeForTime:function(a){for(var b=
this.lastKeyframe;b.time>a;)b=b.prev;return b},__class__:bb};var Ba=function(){};Ba.__name__=!0;Ba.prototype={__class__:Ba};var za=function(){this.labels=new A;this.layers=[]};za.__name__=!0;za.__super__=Ba;za.prototype=l(Ba.prototype,{getLayer:function(a){for(var b=0,c=this.layers;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null},debug:function(){var a=la.fold(this.layers,function(a,b){return a.name.length>b?a.name.length:b},0),b=function(a,b){for(var c="";0<b;)c+=a,--b;return c};var c=
"asdfsadf\n"+b(" ",a);c+="   ";for(var d=0,f=this.totalFrames;d<f;){var e=d++;if(0==e%5)c+=e;else if(0!=e%6||10>e)c+=" "}c=c+"\n"+b(" ",a);c+="   ";d=0;for(f=this.totalFrames;d<f;)c=0==d++%5?c+"\u25bd":c+" ";c+="\n";d=0;for(f=this.layers.length;d<f;){e=d++;var g=this.layers[e];c+=g.name+b(" ",a-g.name.length);c+=" : ";e=0;for(g=g.keyframes;e<g.length;){var h=g[e];++e;null!=h.symbolId?(c+="\u25d9",c=h.tweened?c+b("\u25b8",h.numFrames-1):c+b("\u25c9",h.numFrames-1)):(c+="\u25cb",c+=b("\u25cc",h.numFrames-
1))}c+="\n"}return c},__class__:za});var da=function(a,b){this.x=a;this.y=b};da.__name__=!0;da.prototype={__class__:da};var ab=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};ab.__name__=!0;ab.prototype={__class__:ab};var Ea=function(){};Ea.__name__=!0;Ea.__super__=Ba;Ea.prototype=l(Ba.prototype,{__class__:Ea});var nb=function(){};nb.__name__=!0;var qa=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};qa.__name__=!0;qa.delay=function(a,b){var c=new qa(b);c.run=function(){c.stop();
a()};return c};qa.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:qa};var I=function(){};I.__name__=!0;I.sort=function(a,b){I.rec(a,b,0,a.length)};I.rec=function(a,b,c,d){var f=c+d>>1;if(12>d-c){if(!(d<=c))for(f=c+1;f<d;)for(var e=f++;e>c;){if(0>b(a[e],a[e-1]))I.swap(a,e-1,e);else break;--e}}else I.rec(a,b,c,f),I.rec(a,b,f,d),I.doMerge(a,b,c,f,d,f-c,d-f)};I.doMerge=function(a,b,c,d,f,e,g){if(0!=e&&0!=g)if(2==e+g)0>b(a[d],a[c])&&I.swap(a,
d,c);else{if(e>g){var h=e>>1;var k=c+h;var w=I.lower(a,b,d,f,k);var m=w-d}else m=g>>1,w=d+m,k=I.upper(a,b,c,d,w),h=k-c;I.rotate(a,b,k,d,w);d=k+m;I.doMerge(a,b,c,k,d,h,m);I.doMerge(a,b,d,w,f,e-h,g-m)}};I.rotate=function(a,b,c,d,f){if(c!=d&&d!=f)for(b=I.gcd(f-c,d-c);0!=b--;){for(var e=a[c+b],g=d-c,h=c+b,k=c+b+g;k!=c+b;)a[h]=a[k],h=k,k=f-k>g?k+g:c+(g-(f-k));a[h]=e}};I.gcd=function(a,b){for(;0!=b;){var c=a%b;a=b;b=c}return a};I.upper=function(a,b,c,d,f){d-=c;for(var e,g;0<d;)e=d>>1,g=c+e,0>b(a[f],a[g])?
d=e:(c=g+1,d=d-e-1);return c};I.lower=function(a,b,c,d,f){d-=c;for(var e,g;0<d;)e=d>>1,g=c+e,0>b(a[g],a[f])?(c=g+1,d=d-e-1):d=e;return c};I.swap=function(a,b,c){var d=a[b];a[b]=a[c];a[c]=d};var U=function(){this.h={__keys__:{}}};U.__name__=!0;U.__interfaces__=[nb];U.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++U.count);this.h[c]=b;this.h.__keys__[c]=a},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=
[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return D.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a.__id__]}}},__class__:U};var G=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};G.__name__=!0;G.prototype={hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=
p[b]?a.getReserved(b):a.h[b]},__class__:G};var A=function(){this.h={}};A.__name__=!0;A.__interfaces__=[nb];A.prototype={setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=p[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},
keys:function(){return D.iter(this.arrayKeys())},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},__class__:A};var z=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,z)};z.__name__=!0;z.wrap=function(a){return a instanceof Error?a:new z(a)};z.__super__=Error;z.prototype=l(Error.prototype,{__class__:z});var e=function(){};
e.__name__=!0;e.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=e.__nativeClassName(a);return null!=a?e.__resolveNativeClass(a):null};e.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=
2,f=a.length;d<f;){var g=d++;c=2!=g?c+(","+e.__string_rec(a[g],b)):c+e.__string_rec(a[g],b)}return c+")"}c=a.length;d="[";b+="\t";for(f=0;f<c;)g=f++,d+=(0<g?",":"")+e.__string_rec(a[g],b);return d+"]"}try{d=a.toString}catch(wb){return"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";f=null!=a.hasOwnProperty;for(c in a)f&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==
c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+e.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return String(a)}};e.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,f=c.length;d<f;){var g=d++;g=c[g];if(g==b||e.__interfLoop(g,b))return!0}return e.__interfLoop(a.__super__,b)};e.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case pb:return"boolean"==
typeof a;case sb:return!0;case qb:return"number"==typeof a;case tb:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||e.__interfLoop(e.getClass(a),b))return!0}else{if("object"==typeof b&&e.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==ub&&null!=a.__name__||b==vb&&null!=a.__ename__?!0:a.__enum__==b}};e.__cast=function(a,b){if(e.__instanceof(a,b))return a;throw new z("Cannot cast "+H.string(a)+
" to "+H.string(b));};e.__nativeClassName=function(a){a=e.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};e.__isNativeObj=function(a){return null!=e.__nativeClassName(a)};e.__resolveNativeClass=function(a){return S[a]};var db=function(){};db.__name__=!0;db.prototype={__class__:db};var ua=function(){this.GAME_GROUP_ASSET_RADIX="game"};ua.__name__=!0;ua.__interfaces__=[db];ua.prototype={init:function(a,b,c){this.shell=a;this.gameContainer=b;this.loadAssets()},
reset:function(a){h.instance.traceDebug("WARNING : GameMgrAssets::reset : m\u00e9thode abstraite, doit \u00eatre red\u00e9finie")},destroy:function(){L.instance.freeAssets(this.getGamePatternAsset());L.instance.unloadAssets(null,this.getGamePatternAsset());this.gameContainer=this.shell=null},start:function(){h.instance.traceDebug("WARNING : GameMgrAssets::start : m\u00e9thode abstraite, doit \u00eatre red\u00e9finie")},doFrame:function(a){},getGameId:function(){h.instance.traceDebug("ERROR : GameMgrAssets::getGameId : m\u00e9thode abstraite, doit \u00eatre red\u00e9finie");
return null},switchPause:function(a){h.instance.traceDebug("WARNING : GameMgrAssets::switchPause : m\u00e9thode abstraite, doit \u00eatre red\u00e9finie : "+(null==a?"null":""+a))},getScore:function(){h.instance.traceDebug("WARNING : GameMgrAssets::getScore : pas de d\u00e9finition");return null},getDatas:function(){h.instance.traceDebug("WARNING : GameMgrAssets::getDatas : pas de d\u00e9finition");return null},getGamePatternAsset:function(){return[new ea(this.GAME_GROUP_ASSET_RADIX+this.getGameId(),
"findOnGroup","matchAll")]},onGameReady:function(){this.shell.onGameReady()},loadAssets:function(a){h.instance.traceDebug("INFO : GameMgrAsset::loadAssets");null==a&&(a=new va);L.instance.loadAssets(a,this.getGamePatternAsset()).load(new wa(g(this,this.onAssetsLoaded),null,g(this,this.onAssetsLoadProgress)))},onAssetsLoadProgress:function(a){this.shell.onGameProgress(.5*a.getProgressRate())},onAssetsLoaded:function(a){L.instance.mallocAssets(new Ca(g(this,this.onMallocEnd),g(this,this.onAssetsMallocProgress)),
this.getGamePatternAsset())},onAssetsMallocProgress:function(a,b){this.shell.onGameProgress(.5+.5*a/b)},onMallocEnd:function(){this.onGameReady()},__class__:ua};var Ma=function(){this.myHUD=null;this.GAME_GROUP_ASSET_RADIX="game"};Ma.__name__=!0;Ma.__super__=ua;Ma.prototype=l(ua.prototype,{getGameId:function(){return"Game"},init:function(a,b,c){ua.prototype.init.call(this,a,b,c);this.myHUD=this.shell.enableGameHUD()},destroy:function(){this.myHUD=null;ua.prototype.destroy.call(this)},__class__:Ma});
var O=function(){this.fadeFrontColor=0;this.bgColor=-1;this.FADE_DELAY=200};O.__name__=!0;O.prototype={destroy:function(){Z.getInstance().remListener(g(this,this.onResize));null!=this.bg&&(this.container.removeChild(this.bg),this.bg.destroy(),this.bg=null);null!=this.asset&&(this.content.removeChild(this.asset),this.asset.free(),this.asset=null);null!=this.fadeFront&&(this.container.removeChild(this.fadeFront),this.fadeFront.destroy(),this.fadeFront=null);this.container.removeChild(this.content);
this.content.destroy();this.content=null;this.container.parent.removeChild(this.container);this.container.destroy();this.shell=this.doMode=this.container=null},initScreen:function(a,b){this.shell=a;this.container=b;this.content=this.container.addChild(new PIXI.Container);this.buildContent();Z.getInstance().addListener(g(this,this.onResize));this.launchAfterInit()},start:function(){},askClose:function(a){},doFrame:function(a){null!=this.doMode&&this.doMode(a)},getContainer:function(){return this.container},
getShell:function(){return this.shell},onResize:function(){},launchAfterInit:function(){},buildContent:function(){if(0<=this.bgColor){var a=h.instance.getScreenRectExt();this.bg=this.container.addChildAt(new PIXI.Graphics,0);this.bg.beginFill(this.bgColor);this.bg.drawRect(a.x,a.y,a.width,a.height);this.bg.endFill()}this.buildContentAsset()},buildContentAsset:function(){null!=this.ASSET_ID&&(this.asset=this.content.addChild(L.instance.getAssetInstance(this.ASSET_ID)))},onFadeInComplete:function(){this.shell.onScreenReady(this)},
setModeFadeFront:function(){var a=h.instance.getScreenRectExt();this.fadeFront=this.container.addChild(new PIXI.Graphics);this.fadeFront.beginFill(this.fadeFrontColor);this.fadeFront.drawRect(a.x,a.y,a.width,a.height);this.fadeFront.endFill();this.fadeDelay=this.fadeFront.alpha=0;this.doMode=g(this,this.doModeFadeFront)},doModeFadeFront:function(a){a>this.FADE_DELAY/2&&(a=this.FADE_DELAY/2);this.fadeDelay+a>=this.FADE_DELAY?(this.content.visible=!1,this.fadeFront.alpha=1,this.setModeFadeOut()):(this.fadeDelay+=
a,this.fadeFront.alpha=this.fadeDelay/this.FADE_DELAY)},setModeFadeOut:function(){this.fadeDelay=0;this.doMode=g(this,this.doModeFadeOut)},doModeFadeOut:function(a){a>this.FADE_DELAY/2&&(a=this.FADE_DELAY/2);this.fadeDelay+a>=this.FADE_DELAY?(this.container.alpha=0,this.doMode=null,this.shell.onScreenEnd(this)):(this.fadeDelay+=a,this.container.alpha=1-this.fadeDelay/this.FADE_DELAY)},setModeFadeIn:function(){this.fadeDelay=this.container.alpha=0;this.doMode=g(this,this.doModeFadeIn)},doModeFadeIn:function(a){a>
this.FADE_DELAY/2&&(a=this.FADE_DELAY/2);this.fadeDelay+a>=this.FADE_DELAY?(this.container.alpha=1,this.doMode=null,this.onFadeInComplete()):(this.fadeDelay+=a,this.container.alpha=this.fadeDelay/this.FADE_DELAY)},__class__:O};var ha=function(){this.hit=this.startBt=this.startBtFlump=null;O.call(this);this.ASSET_ID="screenMain"};ha.__name__=!0;ha.__super__=O;ha.prototype=l(O.prototype,{destroy:function(){null!=this.asset&&null!=X.instance&&X.instance.recursiveFreeLocalTxt(this.asset.getContent());
null!=this.startBt&&(t.unsetQuickBt(this.startBt),this.startBt=null);null!=this.startBtFlump&&(this.startBtFlump.destroy(),this.startBtFlump=null);null!=this.hit&&(t.unsetQuickBt(this.hit),this.hit=null);O.prototype.destroy.call(this)},buildContent:function(){O.prototype.buildContent.call(this);null!=this.asset&&(this.hit=this.getLayerHit(),null!=this.hit&&(this.hit=e.__cast(this.asset.getContent(),m).getLayer("hit"),this.hit.alpha=0,t.setQuickBt(this.hit,g(this,this.onBtStart))),this.buildContentStart(),
null!=X.instance&&X.instance.recursiveSetLocalTxt(this.asset.getContent()))},buildContentStart:function(){var a=this.getLayerStart();null!=a&&(e.__instanceof(e.__cast(a,PIXI.Container).getChildAt(0),m)&&null!=k.getLayer("up",e.__cast(a,PIXI.Container).getChildAt(0))?(this.startBtFlump=new aa(e.__cast(a,PIXI.Container).getChildAt(0)),this.startBtFlump.addPressListener(g(this,this.onBtStart))):(this.startBt=a,t.setQuickBt(this.startBt,g(this,this.onBtStart))),null!=this.hit&&(this.hit.buttonMode=!1))},
launchAfterInit:function(){this.shell.onScreenReady(this)},onBtStart:function(a){this.shell.onScreenClose(this);this.setModeFadeOut()},getLayerHit:function(){return k.getLayer("hit",this.asset.getContent())},getLayerStart:function(){return k.getLayer("start",this.asset.getContent())},__class__:ha});var Na=function(){ha.call(this)};Na.__name__=!0;Na.__super__=ha;Na.prototype=l(ha.prototype,{onBtStart:function(a){C.getInstance().play("click",null,!0);ha.prototype.onBtStart.call(this,a)},__class__:Na});
var Fa=function(){O.call(this);this.ASSET_ID="popHelp"};Fa.__name__=!0;Fa.__super__=O;Fa.prototype=l(O.prototype,{destroy:function(){t.unsetQuickBt(this.getHit());X.instance.recursiveFreeLocalTxt(this.asset);O.prototype.destroy.call(this)},launchAfterInit:function(){this.setModeFadeIn()},buildContent:function(){O.prototype.buildContent.call(this);t.setQuickBt(this.getHit(),g(this,this.onClose));X.instance.recursiveSetLocalTxt(this.asset)},onClose:function(a){C.getInstance().play("click");this.shell.onScreenClose(this);
this.setModeFadeOut()},getHit:function(){return e.__cast(this.asset.getContent(),m).getLayer("hit")},__class__:Fa});var eb=function(){};eb.__name__=!0;eb.prototype={__class__:eb};var Oa=function(){this.shell=this.asset=this.container=this.btHelp=null};Oa.__name__=!0;Oa.__interfaces__=[eb];Oa.prototype={init:function(a,b,c){this.shell=a;this.container=b;this.initAsset();Z.getInstance().addListener(g(this,this.onResize));this.onResize()},destroy:function(a){this.freeAsset();this.shell=this.container=
null},doFrame:function(a){},switchPause:function(a){},initAsset:function(){this.asset=this.container.addChild(L.instance.getAssetInstance("myHUD"));this.btHelp=new aa(this.getBtHelp(),g(this,this.onHelp))},freeAsset:function(){this.btHelp.destroy();this.btHelp=null;this.container.removeChild(this.asset);this.asset.free();this.asset=null},onResize:function(){var a=h.instance.getScreenRect();k.setLayerXY(this.getBtHelp().parent,a.x+a.width,a.y)},onHelp:function(a){C.getInstance().play("click");this.btHelp.reset();
this.shell.onGameHelp()},getBtHelp:function(){return e.__cast(this.asset.getContent(),m).getLayer("btHelp").getChildAt(0)},__class__:Oa};var fb=function(){};fb.__name__=!0;fb.prototype={__class__:fb};var ra=function(){this.isLocked=this.isAssetsMainReady=!1;this.isCurScreenReady=!0};ra.__name__=!0;ra.__interfaces__=[fb];ra.prototype={init:function(a,b,c,d){this._container=a;this._assetsFile=b;this._localFile=c;this._fonts=d;this._containerScr=this._container.addChild(new PIXI.Container);this.initPreLoad();
N.getInstance().addIterator(g(this,this.doFrame))},onScreenReady:function(a){this.isCurScreenReady=!0;this.switchLock(!1);if(null==this.prevScreen&&(a.start(),e.__instanceof(a,J)&&this.isAssetsMainReady))e.__cast(a,J).onLoadComplete()},onScreenClose:function(a,b){e.__instanceof(a,ma)?(b=this.getScreenSplash(),this.onShellReadyMini()):e.__instanceof(a,Ga)&&(b=this.getScreenInitLoad());this.prevScreen=a;this.switchLock(!0);this.setCurScreen(b);if(e.__instanceof(a,J))this.onShellReadyMain()},onScreenEnd:function(a){this.prevScreen=
null;a.destroy();if(this.isCurScreenReady&&null!=this.curScreen&&(this.curScreen.start(),e.__instanceof(this.curScreen,J)&&this.isAssetsMainReady))e.__cast(this.curScreen,J).onLoadComplete();this.switchLock(!1)},switchLock:function(a){if(a)h.instance.traceDebug("INFO : BaseShell::switchLock : interactiveChildren : "+H.string(this._container.interactiveChildren)+" -> "+H.string(!a)),this.isLocked=!0,this._container.interactiveChildren=!1;else if(null==this.prevScreen&&null==this.curScreen||null==this.prevScreen&&
this.isCurScreenReady)h.instance.traceDebug("INFO : BaseShell::switchLock : interactiveChildren : "+H.string(this._container.interactiveChildren)+" -> "+H.string(!a)),this.isLocked=!1,this._container.interactiveChildren=!0},getSavedDatas:function(a,b){h.instance.traceDebug("INFO : BaseShell::getSavedDatas : "+a);return null},setSavedDatas:function(a,b){h.instance.traceDebug("INFO : BaseShell::setSavedDatas : "+a)},doFrame:function(a){null!=this.prevScreen&&this.prevScreen.doFrame(a);null!=this.curScreen&&
this.curScreen.doFrame(a)},onShellReadyMini:function(){h.instance.traceDebug("INFO : BaseShell::onShellReadyMini");this.loadAssetsMain()},onShellReadyMain:function(){h.instance.traceDebug("INFO : BaseShell::onShellReadyMain");this.setCurScreen(this.getScreenMain())},setCurScreen:function(a){this.curScreen=a;this.isCurScreenReady=!1;null!=this.curScreen&&(this.switchLock(!0),this.curScreen.initScreen(this,this.addScreenDisplay(this.curScreen)))},addScreenDisplay:function(a){return this._containerScr.addChildAt(new PIXI.Container,
0)},initPreLoad:function(a){null==a&&(a=new va);this.setCurScreen(this.getScreenPreload());null!=this._localFile&&a.addTxtFile(this._localFile);a.addTxtFile(this._assetsFile);for(var b=0,c=E.fields(this._fonts);b<c.length;){var d=c[b];++b;a.addFontFile(d,e.__cast(E.getProperty(this._fonts,d),W))}a.load(new wa(g(this,this.onPreLoadComplete),null,g(this,this.onPreLoadProgess)))},onPreLoadProgess:function(a){e.__cast(this.curScreen,ma).onLoadProgress(.5*a.getProgressRate())},onPreLoadComplete:function(a){this.instanciateLocalMgr();
this.instanciateAssetsMgr();this.onAssetDescBuilt();this.loadAssetsMini()},instanciateLocalMgr:function(){null!=this._localFile&&new X(Q.getInstance().getLoadingFile(this._localFile.getId()).getLoadedContent())},instanciateAssetsMgr:function(){new L;L.instance.init(Q.getInstance().getLoadingFile(this._assetsFile.getId()).getLoadedContent())},onAssetDescBuilt:function(){h.instance.traceDebug("INFO : ShellDefaultRender::onAssetDescBuilt")},loadAssetsMini:function(a){null==a&&(a=new va);L.instance.loadAssets(a,
this.getAssetsMiniPatterns()).load(new wa(g(this,this.onAssetsMiniLoaded),null,g(this,this.onAssetsMiniProgress)))},onAssetsMiniProgress:function(a){e.__cast(this.curScreen,ma).onLoadProgress(.5+.25*a.getProgressRate())},onAssetsMiniLoaded:function(a){L.instance.mallocAssets(new Ca(g(this,this.onMallocMiniEnd),g(this,this.onMallocMiniProgress)),this.getAssetsMiniPatterns())},onMallocMiniProgress:function(a,b){e.__cast(this.curScreen,ma).onLoadProgress(.75+a/b*.25)},onMallocMiniEnd:function(){e.__cast(this.curScreen,
ma).onLoadComplete()},loadAssetsMain:function(a){null==a&&(a=new va);L.instance.loadAssets(a,this.getAssetsMainPatterns()).load(new wa(g(this,this.onAssetsMainLoaded),null,g(this,this.onAssetsMainProgress)))},onAssetsMainProgress:function(a){if(e.__instanceof(this.curScreen,J)&&!this.isLocked)e.__cast(this.curScreen,J).onLoadProgress(.5*a.getProgressRate())},onAssetsMainLoaded:function(a){L.instance.mallocAssets(new Ca(g(this,this.onMallocMainEnd),g(this,this.onMallocMainProgress)),this.getAssetsMainPatterns())},
onMallocMainProgress:function(a,b){if(e.__instanceof(this.curScreen,J)&&!this.isLocked)e.__cast(this.curScreen,J).onLoadProgress(.5+a/b*.5)},onMallocMainEnd:function(){this.isAssetsMainReady=!0;if(e.__instanceof(this.curScreen,J)&&!this.isLocked)e.__cast(this.curScreen,J).onLoadComplete()},getAssetsMiniPatterns:function(){return[new ea("mini","findOnGroup","matchAll")]},getAssetsMainPatterns:function(){return[new ea("main","findOnGroup","matchAll")]},getScreenPreload:function(){return new ma},getScreenSplash:function(){return new Ga},
getScreenInitLoad:function(){return new J},getScreenMain:function(){return new ha},__class__:ra};var gb=function(){};gb.__name__=!0;gb.prototype={__class__:gb};var Y=function(){this.curGame=null;ra.call(this)};Y.__name__=!0;Y.__interfaces__=[gb];Y.__super__=ra;Y.prototype=l(ra.prototype,{init:function(a,b,c,d){this.gameContainer=a.addChild(new PIXI.Container);ra.prototype.init.call(this,a,b,c,d)},onGameHelp:function(a){h.instance.traceDebug("INFO : GameShell::onGameHelp : "+a)},onGameReady:function(){this.startGame()},
onGameProgress:function(a){h.instance.traceDebug("INFO : GameShell::onGameProgress : "+a)},onGameAborted:function(){this.killGame()},onGameover:function(a,b){this.onGameAborted()},getCurGame:function(){return this.curGame},enableGameHUD:function(a){h.instance.traceDebug("INFO : GameShell::enableGameHUD : "+a);return null},getCurGameHUD:function(){return null},getCurGameSavedDatas:function(){return this.getSavedDatas(this.curGame.getGameId())},getGameInstance:function(){return this.curGame},launchGame:function(){this.curGame=
this.getGameInstance();this.curGame.init(this,this.gameContainer,this.getCurGameSavedDatas())},startGame:function(){this.curGame.start()},killGame:function(){this.curGame.destroy();this.curGame=null},doFrame:function(a){ra.prototype.doFrame.call(this,a);null!=this.curGame&&this.curGame.doFrame(a)},__class__:Y});var Ja=function(){this.btFullscreen=this.btFullscreenAsset=this.curHUD=null;Y.call(this);Z.getInstance().addListener(g(this,this.onResize))};Ja.__name__=!0;Ja.__super__=Y;Ja.prototype=l(Y.prototype,
{init:function(a,b,c,d){Y.prototype.init.call(this,a,b,c,d);this.myHUDContainer=a.addChildAt(new PIXI.Container,a.getChildIndex(this.gameContainer)+1);this.gameContainer.interactiveChildren=!1;this.myHUDContainer.interactiveChildren=!1},getCurGameHUD:function(){return this.curHUD},enableGameHUD:function(a){null==this.curHUD?(this.curHUD=new Oa,this.curHUD.init(this,this.myHUDContainer)):h.instance.traceDebug("ERROR : MyShell::enableGameHUD : un HUD est d\u00e9j\u00e0 actif, ignore");return this.curHUD},
onGameHelp:function(a){this.curGame.switchPause(!0);this.gameContainer.interactiveChildren=!1;this.myHUDContainer.interactiveChildren=!1;this.setCurScreen(new Fa)},onScreenEnd:function(a){Y.prototype.onScreenEnd.call(this,a);(e.__instanceof(a,ha)||e.__instanceof(a,Fa))&&null==this.curScreen&&null!=this.curGame&&(this.gameContainer.interactiveChildren=!0,this.myHUDContainer.interactiveChildren=!0,this.curGame.switchPause(!1))},onResize:function(){if(null!=this.btFullscreenAsset){var a=h.instance.getScreenRect();
this.btFullscreenAsset.x=a.x;this.btFullscreenAsset.y=a.y}},onBtFullscreen:function(a){C.getInstance().play("click",null,!0)},setCurScreen:function(a){Y.prototype.setCurScreen.call(this,a);e.__instanceof(a,ha)&&null==this.btFullscreenAsset&&(this.btFullscreenAsset=this._containerScr.addChildAt(L.instance.getAssetInstance("btFullscreen"),this._containerScr.getChildIndex(a.getContainer())+1),this.btFullscreen=k.createFullscreenBt(this.btFullscreenAsset.getContent()),this.btFullscreen.addDownListener(g(this,
this.onBtFullscreen)),this.onResize())},loadAssetsMain:function(a){null==a&&(a=new va);a.addHowlFile(new Pa("click"));Y.prototype.loadAssetsMain.call(this,a)},onAssetsMainProgress:function(a){if(e.__instanceof(this.curScreen,J)&&!this.isLocked)e.__cast(this.curScreen,J).onLoadProgress(.25*a.getProgressRate())},onMallocMainProgress:function(a,b){if(e.__instanceof(this.curScreen,J)&&!this.isLocked)e.__cast(this.curScreen,J).onLoadProgress(.25+a/b*.25)},onMallocMainEnd:function(){this.launchGame()},
onGameProgress:function(a){if(e.__instanceof(this.curScreen,J)&&!this.isLocked)e.__cast(this.curScreen,J).onLoadProgress(.5+.5*a)},onGameReady:function(){Y.prototype.onGameReady.call(this);this.curGame.switchPause(!0);Y.prototype.onMallocMainEnd.call(this)},getScreenMain:function(){return new Na},getGameInstance:function(){return new Ma},__class__:Ja});var m=function(a,b){this.animationSpeed=1;this.ticker=PIXI.ticker.shared;this.displaying=new U;this.movieChildren=new U;this.layerLookup=new A;this.layers=
new U;PIXI.Container.call(this);this.resourceId=b;if(null==b){if(this.resource=x.getResourceForMovie(a),null==this.resource)throw new z("Flump movie does not exist: "+a);}else if(this.resource=x.get(b),null==this.resource)throw new z("Flump resource does not exist: "+b);this.resolution=this.resource.resolution;b=this.resource.library.movies;this.symbol=null!=p[a]?b.getReserved(a):b.h[a];this.player=new $a(this.symbol,this,this.resolution);this.set_loop(!0);this.master=!0;this.once("added",g(this,
this.onAdded))};m.__name__=!0;m.__interfaces__=[Za];m.__super__=PIXI.Container;m.prototype=l(PIXI.Container.prototype,{disableAsMaster:function(){this.master=!1;this.off("added",g(this,this.onAdded))},get_resX:function(){return this.x/this.resolution},set_resX:function(a){this.x=a*this.resolution;return a},get_resY:function(){return this.y/this.resolution},set_resY:function(a){this.y=a*this.resolution;return a},get_resScaleX:function(){return this.scale.x/this.resolution},set_resScaleX:function(a){this.scale.x=
a*this.resolution;return a},get_resScaleY:function(){return this.scale.y/this.resolution},set_resScaleY:function(a){this.scale.y=a*this.resolution;return a},getLayer:function(a){var b=this.layerLookup;if(0==(null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a)))throw new z("Layer "+a+"does not exist");b=this.layerLookup;return null!=p[a]?b.getReserved(a):b.h[a]},getChildDisplayObject:function(a,b){null==b&&(b=0);a=this.player.getDisplayKey(a,b);return this.movieChildren.h[a.__id__]},getChildMovie:function(a,
b){null==b&&(b=0);var c=this.getChildDisplayObject(a,b);if(0==e.__instanceof(c,m))throw new z("Child on layer "+a+" at keyframeIndex "+H.string(F.toFloat(b))+" is not of type flump.Movie!");return c},get_symbolId:function(){return this.symbol.name},set_loop:function(a){a&&this.player.get_playing()?this.player.loop():0==a&&this.player.get_looping()&&this.player.play();return this.loop=a},set_onComplete:function(a){return this.onComplete=a},set_currentFrame:function(a){this.player.set_currentFrame(a);
return a},get_currentFrame:function(){return this.player.get_currentFrame()},get_playing:function(){return this.player.get_playing()?!0:this.player.get_looping()},get_independantTimeline:function(){return this.player.independantTimeline},set_independantTimeline:function(a){return this.player.independantTimeline=a},get_independantControl:function(){return this.player.independantControl},set_independantControl:function(a){return this.player.independantControl=a},get_totalFrames:function(){return this.player.get_totalFrames()},
set_tint:function(a){for(var b=this.movieChildren.iterator();b.hasNext();){var c=b.next();e.__instanceof(c,ba)?e.__cast(c,ba).tint=a:e.__instanceof(c,m)&&e.__cast(c,m).set_tint(a)}return this.tint=a},stop:function(){this.player.stop()},play:function(){this.loop?this.player.loop():this.player.play()},gotoAndStop:function(a){this.loop||(F.gt(a,this.player.get_totalFrames()-1)?a=this.player.get_totalFrames()-1:0>a&&(a=0));this.player.goToFrame(a).stop()},gotoAndPlay:function(a){this.loop||(F.gt(a,this.player.get_totalFrames()-
1)?a=this.player.get_totalFrames()-1:0>a&&(a=0));this.loop?this.player.goToFrame(a).loop():this.player.goToFrame(a).play()},getLabelFrame:function(a){return this.player.getLabelFrame(a)},tick:function(){this.player.advanceTime(this.ticker.elapsedMS*this.animationSpeed)},onAdded:function(a){this.once("removed",g(this,this.onRemoved));this.ticker.add(g(this,this.tick))},onRemoved:function(a){this.once("added",g(this,this.onAdded));this.ticker.remove(g(this,this.tick))},createLayer:function(a){var b=
this.layers,c=new PIXI.Container;b.set(a,c);b=this.layers.h[a.__id__].name=a.name;c=this.layers.h[a.__id__];var d=this.layerLookup;null!=p[b]?d.setReserved(b,c):d.h[b]=c;this.addChild(this.layers.h[a.__id__])},getChildPlayer:function(a){return this.movieChildren.h[a.displayKey.__id__].player},createFlumpChild:function(a){var b=this.movieChildren,c=this.resource.createDisplayObject(a.symbolId);b.set(a,c)},removeFlumpChild:function(a,b){this.layers.h[a.__id__].removeChildren()},addFlumpChild:function(a,
b){this.layers.h[a.__id__].addChild(this.movieChildren.h[b.__id__])},onAnimationComplete:function(){if(null!=this.onComplete)this.onComplete()},renderFrame:function(a,b,c,d,f,g,h,k,m,n){var l=this.layers.h[a.layer.__id__],w=null;l.x=b;l.y=c;g=-g;this.master&&(l.x/=this.resolution,l.y/=this.resolution);0<l.children.length&&(w=l.getChildAt(0),w.scale.x=d,w.scale.y=f,this.master&&(w.scale.x/=this.resolution,w.scale.y/=this.resolution));"flipbook"!=l.name&&(e.__instanceof(a.symbol,Ea)?null!=w&&(b=a.symbol,
w.pivot.x=a.pivot.x-b.origin.x,w.pivot.y=a.pivot.y-b.origin.y,this.master&&(w.pivot.x/=this.resolution,w.pivot.y/=this.resolution)):null!=w&&e.__instanceof(w,PIXI.Container)&&0<e.__cast(w,PIXI.Container).children.length&&"flipbook"==e.__cast(w,PIXI.Container).getChildAt(0).name?(w.pivot.x=a.pivot.x,w.pivot.y=a.pivot.y,this.master&&(w.pivot.x/=this.resolution,w.pivot.y/=this.resolution)):null!=w&&(w.x=-d*a.pivot.x,w.y=-f*a.pivot.y,this.master&&(w.x/=this.resolution,w.y/=this.resolution)));l.skew.x=
g;l.skew.y=h;l.alpha=k;null==a.layer.refAnimatedTint?a.layer.refAnimatedTint=new La(n,m):a.layer.refAnimatedTint.update(n,m);0!=m?l.filters=[a.layer.refAnimatedTint]:null!=l.filters&&(l.filters=null)},setMask:function(a){if(null!=a.mask){var b=this.getLayer(a.mask).getChildAt(0).getBounds();this.getLayer(a.mask).removeChildAt(0);var c=new PIXI.Graphics;c.beginFill(0);c.drawRect(b.x,b.y,b.width,b.height);c.endFill();this.getLayer(a.mask).addChild(c);this.layers.h[a.__id__].mask=c}},labelPassed:function(a){this.emit("labelPassed",
a.name)},labelHit:function(a){this.emit("labelHit",a.name)},destroy:function(a){this.stop();this.set_onComplete(null);for(a=this.layers.iterator();a.hasNext();)a.next().removeChildren();this.player=this.symbol=null;PIXI.Container.prototype.destroy.call(this,!0)},getBaseClass:function(){return this.symbol.baseClass},getCustomData:function(){return this.symbol.data},getLayerCustomData:function(a,b){null==b&&(b=0);if(null==this.symbol.getLayer(a))throw new z("Layer "+a+" does not exist.");a=this.symbol.getLayer(a).getKeyframeForFrame(b);
if(null==a)throw new z("Keyframe does not exist at index "+H.string(F.toFloat(b)));return a.data},__class__:m,__properties__:{set_tint:"set_tint",get_totalFrames:"get_totalFrames",set_independantControl:"set_independantControl",get_independantControl:"get_independantControl",set_independantTimeline:"set_independantTimeline",get_independantTimeline:"get_independantTimeline",get_playing:"get_playing",set_currentFrame:"set_currentFrame",get_currentFrame:"get_currentFrame",set_onComplete:"set_onComplete",
set_loop:"set_loop",get_symbolId:"get_symbolId",set_resScaleY:"set_resScaleY",get_resScaleY:"get_resScaleY",set_resScaleX:"set_resScaleX",get_resScaleX:"get_resScaleX",set_resY:"set_resY",get_resY:"get_resY",set_resX:"set_resX",get_resX:"get_resX"}});var x=function(a,b,c,d){this.library=a;this.textures=b;this.resourceId=c;this.resolution=d};x.__name__=!0;x.exists=function(a){var b=x.resources;return null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a)};x.destroy=function(a){var b=x.resources;if(0==
(null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a)))throw new z("Cannot destroy FlumpResource: "+a+" as it does not exist.");b=x.resources;b=null!=p[a]?b.getReserved(a):b.h[a];var c=b.textures;for(c=new G(c,c.arrayKeys());c.hasNext();)c.next().destroy();b.library=null;x.resources.remove(a)};x.get=function(a){var b=x.resources;if(null!=p[a]?!b.existsReserved(a):!b.h.hasOwnProperty(a))throw new z("Flump resource: "+a+" does not exist.");b=x.resources;return null!=p[a]?b.getReserved(a):b.h[a]};x.getResourceForMovie=
function(a){var b=x.resources;for(b=new G(b,b.arrayKeys());b.hasNext();){var c=b.next(),d=c.library.movies;if(null!=p[a]?d.existsReserved(a):d.h.hasOwnProperty(a))return c}throw new z("Movie: "+a+"does not exists in any loaded flump resources.");};x.getResourceForSprite=function(a){var b=x.resources;for(b=new G(b,b.arrayKeys());b.hasNext();){var c=b.next(),d=c.library.sprites;if(null!=p[a]?d.existsReserved(a):d.h.hasOwnProperty(a))return c}throw new z("Sprite: "+a+" does not exists in any loaded flump resources.");
};x.prototype={createMovie:function(a){a=null!=x.flumpFactory&&x.flumpFactory.displayClassExists(a)?Ya.createInstance(x.flumpFactory.getMovieClass(a),[]):new m(a,this.resourceId);a.disableAsMaster();return a},createSprite:function(a){return null!=x.flumpFactory&&x.flumpFactory.displayClassExists(a)?Ya.createInstance(x.flumpFactory.getSpriteClass(a),[]):new ba(a,this.resourceId)},createDisplayObject:function(a){var b=this.library.movies;b=(null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?this.createMovie(a):
this.createSprite(a);b.name=a;return b},__class__:x};var ba=function(a,b){this.symbolId=a;this.resourceId=b;if(null!=b){var c=x.get(b);if(null==c)throw new z("Library: "+b+"does has not been loaded.");}else c=x.getResourceForSprite(a);this.resolution=c.resolution;b=c.library.sprites;a=null!=p[a]?b.getReserved(a):b.h[a];b=a.texture;c=c.textures;c=null!=p[b]?c.getReserved(b):c.h[b];PIXI.Sprite.call(this,c);this.data=a.data;this.baseClass=a.baseClass;this.anchor.x=a.origin.x/c.width;this.anchor.y=a.origin.y/
c.height};ba.__name__=!0;ba.__super__=PIXI.Sprite;ba.prototype=l(PIXI.Sprite.prototype,{get_resX:function(){return this.x/this.resolution},set_resX:function(a){this.x=a*this.resolution;return a},get_resY:function(){return this.y/this.resolution},set_resY:function(a){this.y=a*this.resolution;return a},get_resScaleX:function(){return this.scale.x/this.resolution},set_resScaleX:function(a){this.scale.x=a*this.resolution;return a},get_resScaleY:function(){return this.scale.y/this.resolution},set_resScaleY:function(a){this.scale.y=
a*this.resolution;return a},getBaseClass:function(){return this.baseClass},getCustomData:function(){return this.data},__class__:ba,__properties__:{set_resScaleY:"set_resScaleY",get_resScaleY:"get_resScaleY",set_resScaleX:"set_resScaleX",get_resScaleX:"get_resScaleX",set_resY:"set_resY",get_resY:"get_resY",set_resX:"set_resX",get_resX:"get_resX"}});var Da=function(a,b,c){this._imageData=null;this.mgr=c;if(null!=a){var d=a.add_groups;this.id=a.id;this["export"]=a["export"];this.sharedProperties=new ca(a);
this.groups=new A;if(null!=b){a=this.id;var f=b.assets;null!=p[a]?f.setReserved(a,this):f.h[a]=this;a=b.id;f=this.groups;null!=p[a]?f.setReserved(a,b):f.h[a]=b}if(null!=d)for(a=0;a<d.length;){b=c.addGroup(d[a]);f=this.id;var e=b.assets;null!=p[f]?e.setReserved(f,this):e.h[f]=this;f=b.id;e=this.groups;null!=p[f]?e.setReserved(f,b):e.h[f]=b;++a}}};Da.__name__=!0;Da.prototype={getAssetInstance:function(){if(0<this.freeInstances.length){var a=this.freeInstances.pop();this.usedInstances.set(a,a);a.addChild(a.getContent())}else a=
this.generateInstance(),"lock_instance"!=this.getLockInstance()&&this.usedInstances.set(a,a);return a},freeAssetInstance:function(a){null!=this.usedInstances.h.__keys__[a.__id__]?(this.usedInstances.remove(a),this.freeInstances.push(a)):a.destroy()},getFile:function(){if(null!=this.sharedProperties.file)return this.sharedProperties.file;var a=this.groups;for(var b=new G(a,a.arrayKeys());b.hasNext();)if(a=b.next().getFile(),null!=a)return a;return this.mgr.sharedProperties.file},free:function(){for(var a=
0,b=this.freeInstances;a<b.length;){var c=b[a];++a;c.destroy()}this.freeMap();this.usedInstances=this.freeInstances=null},isMalloc:function(){return null!=this.freeInstances},getInstanceCount:function(){if(0<=this.sharedProperties.instanceCount)return this.sharedProperties.instanceCount;var a=this.groups;for(var b=new G(a,a.arrayKeys());b.hasNext();)if(a=b.next().getInstanceCount(),0<=a)return a;return this.mgr.sharedProperties.instanceCount},getLockInstance:function(){if("lock_undefined"!=this.sharedProperties.lockInstance)return this.sharedProperties.lockInstance;
var a=this.groups;for(var b=new G(a,a.arrayKeys());b.hasNext();)if(a=b.next().getLockInstance(),"lock_undefined"!=a)return a;return this.mgr.sharedProperties.lockInstance},getRender:function(){if(null!=this.sharedProperties.render)return this.sharedProperties.render;var a=this.groups;for(var b=new G(a,a.arrayKeys());b.hasNext();)if(a=b.next().getRender(),null!=a)return a;return this.mgr.sharedProperties.render},getIsMap:function(){if("map_undefined"!=this.sharedProperties.mapMode)return"map_yes"==
this.sharedProperties.mapMode;var a=this.groups;for(a=new G(a,a.arrayKeys());a.hasNext();){var b=a.next();if("map_undefined"!=b.getMapMode())return"map_yes"==b.getMapMode()}return"map_undefined"!=this.mgr.sharedProperties.mapMode?"map_yes"==this.mgr.sharedProperties.mapMode:!1},getData:function(a){var b=this.sharedProperties.datas;if(null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.sharedProperties.datas,null!=p[a]?b.getReserved(a):b.h[a];b=this.groups;for(var c=new G(b,b.arrayKeys());c.hasNext();)if(b=
c.next().getData(a),null!=b)return b;b=this.mgr.sharedProperties.datas;return(null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?(b=this.mgr.sharedProperties.datas,null!=p[a]?b.getReserved(a):b.h[a]):null},malloc:function(){this.freeInstances=[];this.usedInstances=new U;this.mallocInstance();this.getIsMap()&&this.generateMap();return!0},get_imageData:function(){return this._imageData},mallocInstance:function(){for(var a=this.getInstanceCount(),b=0;b<a;)this.freeInstances.push(this.generateInstance()),
++b},generateInstance:function(){var a=this.getRender();if("default"==a.render){if(null!=this.getFile()&&Q.getInstance().getLoadingFile(this.getFile().getId()).isIMG())return new ia(this,PIXI.Sprite.fromImage(Q.getInstance().getLoadingFile(this.getFile().getId()).getUrl()))}else if("flump"==a.render){if("mc"==a.type)return new ia(this,new m(this["export"],this.getFile().getId()));if("sp"==a.type)return new ia(this,new ba(this["export"],this.getFile().getId()))}return new ia(this,new PIXI.Sprite)},
generateMap:function(){var a=this.generateInstance(),b=new PIXI.CanvasRenderer(a.width,a.height,{transparent:!0}),c=a.getLocalBounds();a.x=-c.x;a.y=-c.y;b.render(a);this._imageData=new hb(a.x,a.y,b.context.getImageData(0,0,a.width,a.height));a.destroy();b.destroy(!0)},freeMap:function(){null!=this._imageData&&(this._imageData.destroy(),this._imageData=null)},__class__:Da,__properties__:{get_imageData:"get_imageData"}};var hb=function(a,b,c){this.dx=a;this.dy=b;this.imageData=c};hb.__name__=!0;hb.prototype=
{getPixel:function(a,b){a=Math.floor(a+this.dx);b=Math.floor(b+this.dy);if(0>a||a>this.imageData.width||0>b||b>this.imageData.height)return[0,0,0,0];b=4*(a+this.imageData.width*b);return[this.imageData.data[b],this.imageData.data[b+1],this.imageData.data[b+2],this.imageData.data[b+3]]},destroy:function(){this.imageData=null},__class__:hb};var Qa=function(a,b,c){Da.call(this,a,b,c);this.id="asset_vide";this["export"]=null;this.sharedProperties=new ca(null);this.groups=new A;this.sharedProperties.instanceCount=
0;this.sharedProperties.lockInstance="lock_instance";this.sharedProperties.render=new na(null);this.sharedProperties.mapMode="map_no"};Qa.__name__=!0;Qa.__super__=Da;Qa.prototype=l(Da.prototype,{__class__:Qa});var oa=function(a,b){this.id=null!=a?oa.getId(a):null;this.childs=new A;this.assets=new A;this.setConfig(a,b)};oa.__name__=!0;oa.getId=function(a){return a.id};oa.prototype={setConfig:function(a,b){this.sharedProperties=new ca(a);this.parent=b;null!=b&&(a=this.id,b=b.childs,null!=p[a]?b.setReserved(a,
this):b.h[a]=this)},getFile:function(){return null!=this.sharedProperties.file?this.sharedProperties.file:null!=this.parent?this.parent.getFile():null},getInstanceCount:function(){return 0<=this.sharedProperties.instanceCount?this.sharedProperties.instanceCount:null!=this.parent?this.parent.getInstanceCount():-1},getLockInstance:function(){return"lock_undefined"!=this.sharedProperties.lockInstance?this.sharedProperties.lockInstance:null!=this.parent?this.parent.getLockInstance():"lock_undefined"},
getRender:function(){return null!=this.sharedProperties.render?this.sharedProperties.render:null!=this.parent?this.parent.getRender():null},getMapMode:function(){return"map_undefined"!=this.sharedProperties.mapMode?this.sharedProperties.mapMode:null!=this.parent?this.parent.getMapMode():"map_undefined"},getData:function(a){var b=this.sharedProperties.datas;return(null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?(b=this.sharedProperties.datas,null!=p[a]?b.getReserved(a):b.h[a]):null!=this.parent?
this.parent.getData(a):null},__class__:oa};var ia=function(a,b){PIXI.Container.call(this);this._desc=a;null!=b&&(this._export=this.addChild(b),e.__instanceof(this._export,PIXI.Container)&&k.recursiveStop(this._export))};ia.__name__=!0;ia.__super__=PIXI.Container;ia.prototype=l(PIXI.Container.prototype,{destroy:function(a){null!=this._export&&(null!=this._export.parent&&this._export.parent.removeChild(this._export),this._export.destroy(),this._export=null);this._desc=null;PIXI.Container.prototype.destroy.call(this)},
getContent:function(){return this._export},getDesc:function(){return this._desc},free:function(){this._desc.freeAssetInstance(this)},__class__:ia});var na=function(a){null!=a?(this.render=a.name,null!=a.type&&(this.type=a.type)):this.render="default"};na.__name__=!0;na.prototype={__class__:na};var Ra=function(a){var b=a.value.split(",");this.id=a.id;this.values=[];for(a=0;a<b.length;)this.values.push(new ib(b[a])),++a};Ra.__name__=!0;Ra.prototype={getLen:function(){for(var a=0,b=0;b<this.values.length;)a+=
this.values[b++].getLen();return a},getVal:function(a){for(var b=0;b<this.values.length;){if(a>=this.values[b].getLen())a-=this.values[b].getLen();else break;++b}return this.values[b].getVal(a)},__class__:Ra};var L=function(){this.mallocLimitTime=500;this.vars=null;L.instance=this};L.__name__=!0;L.prototype={init:function(a){this.assets=new A;this.groups=new A;this.voidAsset=new Qa(null,null,this);this.parseGlobal(a.assets);this.parseGroups(a.assets);this.voidAsset.malloc()},getAssetInstance:function(a){if("asset_vide"!=
a){var b=this.assets;return(null!=p[a]?b.getReserved(a):b.h[a]).getAssetInstance()}return this.voidAsset.getAssetInstance()},getVar:function(a){var b=this.vars;return null!=p[a]?b.getReserved(a):b.h[a]},addVar:function(a){null==this.vars&&(this.vars=new A);a=new Ra(a);var b=a.id,c=this.vars;null!=p[b]?c.setReserved(b,a):c.h[b]=a},getAssetDescById:function(a){var b=this.assets;return(null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?(b=this.assets,null!=p[a]?b.getReserved(a):b.h[a]):null},loadAssets:function(a,
b){var c=new A,d;if(null!=b)for(d=0;d<b.length;)this.loadPatternAsset(a,b[d],c),++d;else this.loadPatternAsset(a,null,c);return a},mallocAssets:function(a,b){var c=new A,d;this.notifyMallocAssets=a;this.mallocStack=[];if(null!=b)for(d=0;d<b.length;)this.mallocPatternAsset(b[d],c),++d;else this.mallocPatternAsset(null,c);if(null!=a)this.mallocNbAssets=this.mallocStack.length,N.getInstance().addIterator(g(this,this.doMallocIteration));else{for(;0<this.mallocStack.length;)this.mallocStack[0].malloc()&&
this.mallocStack.shift();this.mallocStack=null}},freeAssets:function(a){if(null!=a)for(var b=0;b<a.length;){var c=a[b];++b;this.freePatternAsset(c)}else this.freePatternAsset(null)},unloadAssets:function(a,b){null==a&&(a=new A);var c=this.assets;for(c=new G(c,c.arrayKeys());c.hasNext();){var d=c.next();if(d.isMalloc()&&(d=d.getFile(),null!=d)){var f=d.getId();null!=p[f]?a.setReserved(f,d):a.h[f]=d}}if(null!=b)for(c=0;c<b.length;)d=b[c],++c,this.unloadPatternAsset(d,a);else this.unloadPatternAsset(null,
a)},doMallocIteration:function(a){a=this.notifyMallocAssets;var b;if(null!=this.mallocStack)for(b=(new Date).getTime();;){a.onMallocAssetsProgress(this.mallocNbAssets-this.mallocStack.length,this.mallocNbAssets);if(0==this.mallocStack.length){N.getInstance().remIterator(g(this,this.doMallocIteration));this.notifyMallocAssets=this.mallocStack=null;a.onMallocAssetsEnd();break}else if(this.mallocStack[0].malloc())this.mallocStack.shift();else break;if(!((new Date).getTime()-b<this.mallocLimitTime))break}},
addGroup:function(a){var b=this.groups;if(null!=p[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.groups,null!=p[a]?b.getReserved(a):b.h[a];b=new oa;b.id=a;var c=this.groups;null!=p[a]?c.setReserved(a,b):c.h[a]=b;return b},addAsset:function(a){var b=a.id,c=this.assets;null!=p[b]?c.setReserved(b,a):c.h[b]=a},freePatternAsset:function(a){var b=this.assets;for(b=new G(b,b.arrayKeys());b.hasNext();){var c=b.next();(null==a||a.match(c))&&c.free()}},unloadPatternAsset:function(a,b){var c=this.assets;
for(c=new G(c,c.arrayKeys());c.hasNext();){var d=c.next();if(!d.isMalloc()&&(null==a||a.match(d))&&(d=d.getFile(),null!=d)){var f=d.getId();(null!=p[f]?b.existsReserved(f):b.h.hasOwnProperty(f))||(f=d.getId(),null!=p[f]?b.setReserved(f,d):b.h[f]=d,Q.getInstance().freeLoadedFileMem(d))}}},mallocPatternAsset:function(a,b){for(var c,d=this.assets.keys();d.hasNext();){var f=d.next();c=this.assets;c=null!=p[f]?c.getReserved(f):c.h[f];null!=(null!=p[f]?b.getReserved(f):b.h[f])||null!=a&&!a.match(c)||(null!=
p[f]?b.setReserved(f,c):b.h[f]=c,this.mallocStack.push(c))}},loadPatternAsset:function(a,b,c){for(var d,f,e=this.assets.keys();e.hasNext();)if(d=e.next(),f=this.assets,d=null!=p[d]?f.getReserved(d):f.h[d],null==b||b.match(d)){f=d.getFile();if(null!=f){var g=f.getId();g=!(null!=p[g]?c.existsReserved(g):c.h.hasOwnProperty(g))}else g=!1;g&&(g=f.getId(),null!=p[g]?c.setReserved(g,f):c.h[g]=f,"flump"==d.getRender().render?a.addFlumpFile(f):a.addDisplayFile(f))}},parseAssets:function(a,b){a=a.assets;var c,
d;if(null!=a)for(c=0;c<a.length;){var f=a[c];var e=this.getVarPool(f);var g=e.getLen();for(d=0;d<g;){var h=new Da(e.substituteVars(f,d),b,this);var k=h.id,l=this.assets;null!=p[k]?l.setReserved(k,h):l.h[k]=h;++d}++c}},parseGroups:function(a,b){var c=a.groups,d;this.parseAssets(a,b);if(null!=c)for(d=0;d<c.length;){a=c[d];new oa(a,b);var f=this.groups;var e=oa.getId(a);if(null!=(null!=p[e]?f.getReserved(e):f.h[e]))f=this.groups,e=oa.getId(a),e=null!=p[e]?f.getReserved(e):f.h[e],e.setConfig(a,b);else{e=
new oa(a,b);f=e.id;var g=this.groups;null!=p[f]?g.setReserved(f,e):g.h[f]=e}this.parseGroups(a,e);++d}},parseGlobal:function(a){this.sharedProperties=new ca(a);null==this.sharedProperties.render&&(this.sharedProperties.render=new na(null));0>this.sharedProperties.instanceCount&&(this.sharedProperties.instanceCount=1);"lock_undefined"==this.sharedProperties.lockInstance&&(this.sharedProperties.lockInstance="unlock_instance");this.buildVars(a)},buildVars:function(a){a=a.vars;var b;null==this.vars&&
(this.vars=new A);if(null!=a)for(b=0;b<a.length;){var c=new Ra(a[b]);var d=c.id,f=this.vars;null!=p[d]?f.setReserved(d,c):f.h[d]=c;++b}},getVarPool:function(a){a=JSON.stringify(a);var b=new jb,c=this.vars;for(c=new G(c,c.arrayKeys());c.hasNext();){var d=c.next();if(0<=a.indexOf(d.id)){d=d.id;var f=this.vars;b.addVar(null!=p[d]?f.getReserved(d):f.h[d])}}return b},__class__:L};var ca=function(a){this.file=null!=a?this.parseFile(a):null;this.render=null!=a?this.parseRender(a):null;this.instanceCount=
null!=a?this.parseInstanceCount(a):-1;this.lockInstance=null!=a?this.parseLockInstance(a):"lock_undefined";this.datas=null!=a?this.parseDatas(a):new A;this.mapMode=null!=a?this.parseMapMode(a):"map_undefined"};ca.__name__=!0;ca.prototype={parseFile:function(a){a=a.file;return null!=a&&null!=a.name?new W(a.name,a.path,a.version):null},parseRender:function(a){return null!=a.render?new na(a.render):null},parseInstanceCount:function(a){return null!=a.instance?H.parseInt(a.instance):-1},parseLockInstance:function(a){return null!=
a.lock_instance&&"0"!=a.lock_instance?"lock_instance":null!=a.unlock_instance&&"0"!=a.unlock_instance?"unlock_instance":"lock_undefined"},parseMapMode:function(a){return null!=a.map?"1"==a.map?"map_yes":"map_no":"map_undefined"},parseDatas:function(a){a=a.datas;var b=new A;if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c;var f=d.id;d=d.value;null!=p[f]?b.setReserved(f,d):b.h[f]=d}return b},__class__:ca};var kb=function(){};kb.__name__=!0;kb.prototype={__class__:kb};var Ca=function(a,b){this._onEnd=
a;this._onProgress=b};Ca.__name__=!0;Ca.__interfaces__=[kb];Ca.prototype={onMallocAssetsProgress:function(a,b){null!=this._onProgress&&this._onProgress(a,b)},onMallocAssetsEnd:function(){null!=this._onEnd&&(this._onEnd(),this._onProgress=this._onEnd=null)},__class__:Ca};var ea=function(a,b,c){null==c&&(c="matchSubstr");null==b&&(b="findOnId");this.find=a;this.typeFind=b;this.typeMatch=c};ea.__name__=!0;ea.prototype={match:function(a){if("findOnGroup"==this.typeFind)for(a=a.groups,a=new G(a,a.arrayKeys());a.hasNext();){var b=
a.next();if(this.matchGroup(b))return!0}else{if("findOnId"==this.typeFind)return this.cmpStr(a.id);if("findOnFile"==this.typeFind)return this.cmpStr(a.getFile().getId());if("findOnExport"==this.typeFind)return this.cmpStr(a["export"])}return!1},matchGroup:function(a){return null==a?!1:this.cmpStr(a.id)?!0:this.matchGroup(a.parent)},cmpStr:function(a){return"matchAll"==this.typeMatch?a==this.find:null!=a?0<=a.indexOf(this.find):!1},__class__:ea};var jb=function(){this.vars=[]};jb.__name__=!0;jb.prototype=
{addVar:function(a){this.vars.push(a)},getLen:function(){for(var a=1,b=0;b<this.vars.length;)a*=this.vars[b].getLen(),++b;return a},substituteVars:function(a,b){if(0<this.vars.length){a=JSON.stringify(a);b=this.getVarValAt(b);for(var c=b.keys();c.hasNext();){var d=c.next();a=Xa.replace(a,d,null!=p[d]?b.getReserved(d):b.h[d])}return JSON.parse(a)}return a},getVarValAt:function(a){for(var b=new A,c=0;c<this.vars.length;){var d=this.vars[c].id,f=this.vars[c].getVal(a%this.vars[c].getLen());null!=p[d]?
b.setReserved(d,f):b.h[d]=f;a=a/this.vars[c].getLen()|0;++c}return b},__class__:jb};var ib=function(a){this.value=a};ib.__name__=!0;ib.prototype={getLen:function(){var a=this.value.split("..");return 1==a.length?1:H.parseInt(a[1])-H.parseInt(a[0])+1},getVal:function(a){var b=this.value.split("..");if(1==b.length)return this.value;var c=H.parseInt(b[0]);a=c+a;b=b[0].length;if((null==c?"null":""+c).length<b){c=null==a?"null":""+a;for(a=c.length;a<b;)c="0"+c,++a;return c}return null==a?"null":""+a},
__class__:ib};var lb=function(){};lb.__name__=!0;lb.prototype={__class__:lb};var va=function(){this.fileLoads=[];this.currentLoadedFileI=0};va.__name__=!0;va.prototype={destroy:function(){var a;if(null!=this.fileLoads)for(a=this.currentLoadedFileI;a<this.fileLoads.length;)this.fileLoads[a++].free();this.listener=this.fileLoads=null},addFlumpFile:function(a){this.fileLoads.push(new Sa(a))},addDisplayFile:function(a){this.fileLoads.push(new Ta(a))},addTxtFile:function(a){this.fileLoads.push(new Ua(a))},
addFontFile:function(a,b){this.fileLoads.push(new Va(a,b))},addHowlFile:function(a){this.fileLoads.push(new Ha(a))},load:function(a){this.listener=a;this.currentLoadedFileI=-1;this.loadNext()},getProgressRate:function(){return this.currentLoadedFileI/this.fileLoads.length},onCurFileLoaded:function(a){null==a&&(a=!0);var b=this.fileLoads[this.currentLoadedFileI];h.instance.traceDebug("INFO : VegaLoader::onCurFileLoaded : "+b.getId());a&&Q.getInstance().regLoadedFile(b);this.notifyLoadCurrentFileComplete();
this.loadNext()},loadNext:function(){if(null!=this.fileLoads)if(this.currentLoadedFileI++,this.currentLoadedFileI<this.fileLoads.length){var a=this.fileLoads[this.currentLoadedFileI];Q.getInstance().isAlreadyLoaded(a.getId())?(h.instance.traceDebug("WARNING : VegaLoader::loadNext : "+a.getId()+" : already loaded, next"),this.notifyLoadCurrentFileComplete(),this.loadNext()):(h.instance.traceDebug("INFO : VegaLoader::loadNext : "+a.getId()),a.load(this))}else this.finalizeLoading()},notifyLoadCurrentFileComplete:function(){this.listener.onCurrentFileLoaded(this)},
notifyLoadComplete:function(){this.listener.onLoadComplete(this)},finalizeLoading:function(){this.notifyLoadComplete();this.destroy()},__class__:va};var wa=function(a,b,c,d){this._onLoadComplete=a;this._onLoadProgress=b;this._onCurrentFileLoaded=c;this._onLoadError=d};wa.__name__=!0;wa.__interfaces__=[lb];wa.prototype={onLoadProgress:function(a){null!=this._onLoadProgress&&this._onLoadProgress(a)},onLoadComplete:function(a){null!=this._onLoadComplete&&(this._onLoadComplete(a),this._onLoadError=this._onCurrentFileLoaded=
this._onLoadProgress=this._onLoadComplete=null)},onCurrentFileLoaded:function(a){null!=this._onCurrentFileLoaded&&this._onCurrentFileLoaded(a)},onLoadError:function(a){null!=this._onLoadError&&this._onLoadError(a)},__class__:wa};var Q=function(){this.loadedFiles=new A};Q.__name__=!0;Q.getInstance=function(){null==Q.instance&&(Q.instance=new Q);return Q.instance};Q.prototype={getLoadingFile:function(a){if(this.isAlreadyLoaded(a)){var b=this.loadedFiles;return null!=p[a]?b.getReserved(a):b.h[a]}return null},
isAlreadyLoaded:function(a){var b=this.loadedFiles;return null!=(null!=p[a]?b.getReserved(a):b.h[a])},regLoadedFile:function(a){var b=this.loadedFiles,c=a.getId();(null!=p[c]?b.existsReserved(c):b.h.hasOwnProperty(c))?h.instance.traceDebug("WARNING : VegaLoaderMgr::regLoadedFile : file already exists "+a.getId()+", ignore"):(b=this.loadedFiles,c=a.getId(),null!=p[c]?b.setReserved(c,a):b.h[c]=a)},freeLoadedFileMem:function(a){h.instance.traceDebug("INFO : VegaLoaderMgr::freeLoadedFileMem : "+a.getId());
var b=this.loadedFiles,c=a.getId();(null!=p[c]?b.getReserved(c):b.h[c]).free();this.loadedFiles.remove(a.getId())},__class__:Q};var v=function(a){this.ctrReload=0;this.RELOAD_DELAY_MAX=3E3;this.RELOAD_MAX=20;this._file=a;this.buildLoader()};v.__name__=!0;v.getVersionUrl=function(a,b){null==b&&(b=!1);a=a.getVersion();if(null!=a||b)if("NO-VERSION"!=a||b)return"NO-CACHE"==a||b?H.string((new Date).getTime()):a;return""};v.addVersionToUrl=function(a,b){return null!=b&&""!=b?-1!=a.indexOf("?")?a+"&"+v.VERSION_PARAM+
"="+b:a+"?"+v.VERSION_PARAM+"="+b:a};v.prototype={free:function(){null!=this.vegaLoader&&this.removeLoaderListener();this._file=this.vegaLoader=null;this.freeLoader()},getId:function(){return this._file.getId()},load:function(a){this.vegaLoader=a;this.doLoad()},getLoadedContent:function(a){return null!=this.loader&&!this.loader.loading&&0<this.loader.progress?E.getProperty(this.loader.resources,this._file.getId()).data:null},isIMG:function(){return E.getProperty(this.loader.resources,this._file.getId()).isImage},
isJson:function(){return 0!=E.getProperty(this.loader.resources,this._file.getId()).isJson},getUrl:function(){return E.getProperty(this.loader.resources,this._file.getId()).url},buildLoader:function(){this.loader=new PIXI.loaders.Loader;this.loader.add(this._file.getId(),this.getUrlRequest());this.loader.on("error",g(this,this.onError));this.loader.on("complete",g(this,this.onLoadComplete))},freeLoader:function(){null!=this.loader&&(this.loader.reset(),this.loader=null)},doLoad:function(){this.loader.load()},
removeLoaderListener:function(){this.loader.removeAllListeners()},onError:function(){h.instance.traceDebug("ERROR : LoadingFile::onError : "+this._file.getId()+" ( "+this.ctrReload+")");this.ctrReload++<this.RELOAD_MAX?(this.loader.reset(),this.loader.add(this._file.getId(),this.getUrlRequest(!0)),qa.delay(g(this,this.doLoad),this.RELOAD_DELAY_MAX*Math.round(Math.pow(this.ctrReload/this.RELOAD_MAX,2)))):h.instance.reload()},onLoadComplete:function(){if(null==E.getProperty(this.loader.resources,this._file.getId()).error)h.instance.traceDebug("INFO : LoadingFile::onLoadComplete : "+
this._file.getId()),console.log(E.getProperty(this.loader.resources,this._file.getId())),this.removeLoaderListener(),this.vegaLoader.onCurFileLoaded(),this.vegaLoader=null;else this.onError()},getUrlRequest:function(a){null==a&&(a=!1);var b=this._file.getName(),c=null!=this._file.getPath()?this._file.getPath():"";b=-1!=b.indexOf("://")?b:c+b;return b=v.addVersionToUrl(b,v.getVersionUrl(this._file,a))},__class__:v};var Ta=function(a){v.call(this,a)};Ta.__name__=!0;Ta.__super__=v;Ta.prototype=l(v.prototype,
{free:function(){PIXI.Texture.removeTextureFromCache(this.getUrl()).destroy(!0);v.prototype.free.call(this)},__class__:Ta});var Sa=function(a){this.atlasLoader=this.lib=this.textures=this.specByUrl=null;v.call(this,a)};Sa.__name__=!0;Sa.__super__=v;Sa.prototype=l(v.prototype,{free:function(){this.specByUrl=this.textures=this.lib=this.atlasLoader=null;x.destroy(this.getId());v.prototype.free.call(this)},removeLoaderListener:function(){null!=this.atlasLoader&&this.atlasLoader.removeAllListeners();v.prototype.removeLoaderListener.call(this)},
onLoadComplete:function(){if(null==E.getProperty(this.loader.resources,this._file.getId()).error){var a=this.getLoadedContent();if(null!=a&&this.isJson()&&Object.prototype.hasOwnProperty.call(a,"md5")&&Object.prototype.hasOwnProperty.call(a,"movies")&&Object.prototype.hasOwnProperty.call(a,"textureGroups")&&Object.prototype.hasOwnProperty.call(a,"frameRate"))this.ctrReload=0,this.lib=V.create(a,1),this.textures=new A,this.specByUrl=new A,this.atlasLoader=new PIXI.loaders.Loader,this.atlasLoader.on("error",
g(this,this.onAtlasError)),this.atlasLoader.on("complete",g(this,this.onAtlasLoadComplete)),this.buildAtlasLoadQ(),this.doAtlasLoad();else this.onError()}else this.onError()},buildAtlasLoadQ:function(a){null==a&&(a=!1);for(var b=this.getUrl().replace(/\/(.[^/]*)$/i,""),c,d=0,f=this.lib.atlases;d<f.length;){var e=f[d];++d;c=b+"/"+v.addVersionToUrl(e.file,v.getVersionUrl(this._file,a));var k=b+"/"+e.file,l=this.specByUrl;null!=p[k]?l.setReserved(k,e):l.h[k]=e;h.instance.traceDebug("INFO : LoadingFileFlump::buildAtlasLoadQ : "+
c);this.atlasLoader.add(c,null,g(this,this.onAtlasLoaded))}},doAtlasLoad:function(){this.atlasLoader.load()},onAtlasLoaded:function(a){var b=this.specByUrl,c=a.url.split("?")[0];b=(null!=p[c]?b.getReserved(c):b.h[c]).textures;a=new PIXI.BaseTexture(a.data);a.resolution=1;for(c=0;c<b.length;){var d=b[c];++c;var f=new PIXI.Rectangle(d.rect[0],d.rect[1],d.rect[2],d.rect[3]);var e=new K(d.origin[0],d.origin[1]);e.x/=f.width;e.y/=f.height;e=this.textures;d=d.symbol;f=new PIXI.Texture(a,f);null!=p[d]?e.setReserved(d,
f):e.h[d]=f}},onAtlasLoadComplete:function(){var a=new x(this.lib,this.textures,this.getId(),1);if(null!=this.getId()){var b=x.resources,c=this.getId();null!=p[c]?b.setReserved(c,a):b.h[c]=a}E.setProperty(this.loader.resources,"data",a);v.prototype.onLoadComplete.call(this)},onAtlasError:function(){h.instance.traceDebug("ERROR : LoadingFileFlump::onAtlasError ( "+this.ctrReload+")");this.ctrReload++<this.RELOAD_MAX?(this.atlasLoader.reset(),this.buildAtlasLoadQ(!0),qa.delay(g(this,this.doAtlasLoad),
this.RELOAD_DELAY_MAX*Math.round(Math.pow(this.ctrReload/this.RELOAD_MAX,2)))):h.instance.reload()},__class__:Sa});var Va=function(a,b){v.call(this,b);this.fontId=a};Va.__name__=!0;Va.__super__=v;Va.prototype=l(v.prototype,{doLoad:function(){h.instance.traceDebug("INFO : LoadingFileFont::doLoad : "+this.fontId+" : "+this.getUrlRequest());WebFont.load({custom:{families:[this.fontId],urls:[this.getUrlRequest()]},active:g(this,this.onLoadComplete)})},onLoadComplete:function(){this.vegaLoader.onCurFileLoaded();
this.vegaLoader=null},buildLoader:function(){},removeLoaderListener:function(){},__class__:Va});var Ha=function(a){this.desc=a;v.call(this,null)};Ha.__name__=!0;Ha.__super__=v;Ha.prototype=l(v.prototype,{getId:function(){return this.desc.getId()},getLoadedContent:function(a){return this.desc.getHowl()},isIMG:function(){return!1},doLoad:function(){var a=this.desc.getOptions();a.autoplay=!1;a.preload=!1;this.desc.regHowl(new Howl(this.desc.getOptions()));this.desc.getHowl().on("load",g(this,this.onLoadComplete));
this.desc.getHowl().on("loaderror",g(this,this.onLoadError));this.desc.getHowl().load()},buildLoader:function(){},freeLoader:function(){this.desc=null},removeLoaderListener:function(){this.desc.getHowl().off("load",g(this,this.onLoadComplete));this.desc.getHowl().off("loaderror",g(this,this.onLoadError))},onLoadComplete:function(){h.instance.traceDebug("INFO : LoadingFileHowl::onLoadComplete  : "+this.desc.getId());this.removeLoaderListener();this.vegaLoader.onCurFileLoaded();this.vegaLoader=null;
C.getInstance().addSndDesc(this.desc)},onLoadError:function(){this.ctrReload++<this.RELOAD_MAX?(h.instance.traceDebug("ERROR : LoadingFileHowl::onLoadError : "+this.desc.getId()+" : retry "+this.ctrReload),qa.delay(g(this,this.doReload),this.RELOAD_DELAY_MAX*Math.round(Math.pow(this.ctrReload/this.RELOAD_MAX,2)))):(h.instance.traceDebug("ERROR : LoadingFileHowl::onLoadError : "+this.desc.getId()+" : skip !"),this.removeLoaderListener(),this.vegaLoader.onCurFileLoaded(!1),this.vegaLoader=null,C.getInstance().addSndDesc(this.desc),
this.free())},doReload:function(){this.removeLoaderListener();this.desc.getHowl().unload();this.desc.forceAntiCache();this.doLoad()},__class__:Ha});var Ua=function(a){v.call(this,a)};Ua.__name__=!0;Ua.__super__=v;Ua.prototype=l(v.prototype,{__class__:Ua});var W=function(a,b,c){this._name=a;this._path=b;this._version=null!=c?c:h.instance.version};W.__name__=!0;W.prototype={getId:function(){return(null!=this._path?this._path+":":"")+this._name},getName:function(){return this._name},getPath:function(){return this._path},
getVersion:function(){return this._version},__class__:W};var X=function(a,b){this.conf=this.listeners=null;this.TXT_PREFIX="txt";this.TXT_SEP="_";X.instance=this;this.conf=null!=a.documentElement?this.xml2Json(a):a.local;console.log(this.conf);this.listeners=[];null==b&&"undefined"!=typeof window&&(b=window.navigator.language);a=0;for(var c=E.fields(this.conf);a<c.length;){var d=c[a];++a;if(d==b){this.defaultLang=d;break}}null==this.defaultLang&&(this.defaultLang=E.fields(this.conf)[0]);h.instance.traceDebug("INFO : LocalMgr::LocalMgr : defaultLang = "+
this.defaultLang,!0)};X.__name__=!0;X.prototype={xml2Json:function(a){for(var b={},c=0,d;c<a.documentElement.childNodes.length;){if(1==a.documentElement.childNodes[c].nodeType)for(b[a.documentElement.childNodes[c].nodeName]={},d=0;d<a.documentElement.childNodes[c].childNodes.length;)1==a.documentElement.childNodes[c].childNodes[d].nodeType&&(b[a.documentElement.childNodes[c].nodeName][a.documentElement.childNodes[c].childNodes[d].getAttribute("id")]=a.documentElement.childNodes[c].childNodes[d].firstChild.data),
++d;++c}return b},getCurLangId:function(){return this.defaultLang},getCurLangInd:function(){for(var a=0,b=0,c=E.fields(this.conf);b<c.length;){var d=c[b];++b;if(d==this.defaultLang)return a;++a}h.instance.traceDebug("ERROR : LocalMgr::getCurLangInd : "+this.defaultLang+" not found !");return-1},fromIndToId:function(a){for(var b=0,c=0,d=E.fields(this.conf);c<d.length;){var f=d[c];++c;if(b==a)return f;++b}h.instance.traceDebug("INFO : LocalMgr::fromIndToId : "+a+" out of bounds");return null},getNbLangs:function(){for(var a=
0,b=0,c=E.fields(this.conf);b<c.length;)++b,++a;return a},swapLang:function(a,b){null==b&&(b=!1);if(a!=this.defaultLang&&(this.defaultLang=a,!b))for(a=0,b=this.listeners;a<b.length;){var c=b[a];++a;c()}},addListener:function(a){this.listeners.push(a)},remListener:function(a){D.remove(this.listeners,a)},getLocalTxt:function(a,b){if(null==a||""==a)return"";null==b&&(b=this.defaultLang);return E.getProperty(E.getProperty(this.conf,b),a)},instanciateTxtFromFlumpModel:function(a,b,c){a=k.getLayerWithPrefixInMovie(a,
b);b=b.getLayer(a.name).getChildAt(0);a=new pa(a.name);var d={fontFamily:a.fontId,fontSize:a.size,fill:a.color,align:a.align,padding:a.size};this.addWordWrapParams(a,d);c=new PIXI.Text(null==c?this.getLocalTxt(a.localId):c,d);h.instance.traceDebug("INFO : LocalMgr::instanciateTxtFromFlumpModel : "+a.localId+" : "+c.text);b.addChild(c);b.interactiveChildren=!1;this.alignTxt(c,a);return c},parseAndSetLocalTxtInMovie:function(a){for(var b=k.getLayersWithPrefixInMovie(this.TXT_PREFIX,a),c=0;c<b.length;){var d=
b[c];++c;try{this.instanciateTxtFromFlumpModel(d.name,a)}catch(f){f instanceof z&&(f=f.val),console.log(f)}}},recursiveSetLocalTxt:function(a){this.recursiveApply(a,g(this,this.parseAndSetLocalTxtInMovie))},updateTxtFromFlumpModel:function(a,b,c){a=k.getLayerWithPrefixInMovie(a,b);b=b.getLayer(a.name).getChildAt(0);a=new pa(a.name);b=b.getChildAt(b.children.length-1);b.text=null==c?this.getLocalTxt(a.localId):c;this.alignTxt(b,a);return b},updateLocalTxtInMovie:function(a){for(var b=k.getLayersWithPrefixInMovie(this.TXT_PREFIX,
a),c=0;c<b.length;){var d=b[c];++c;try{this.updateTxtFromFlumpModel(d.name,a)}catch(f){f instanceof z&&(f=f.val),console.log(f)}}},recursiveUpdateLocalTxt:function(a){this.recursiveApply(a,g(this,this.updateLocalTxtInMovie))},freeLocalTxtInMovie:function(a){for(var b=k.getLayersWithPrefixInMovie(this.TXT_PREFIX,a),c,d=0;d<b.length;){c=b[d];++d;try{new pa(c.name)}catch(f){f instanceof z&&(f=f.val);console.log(f);continue}c=a.getLayer(c.name).getChildAt(0);c=c.getChildAt(c.children.length-1);a.removeChild(c);
c.destroy()}},recursiveFreeLocalTxt:function(a){this.recursiveApply(a,g(this,this.freeLocalTxtInMovie))},alignTxt:function(a,b){"center"==b.align?a.x=-a.width/2:"right"==b.align&&(a.x=-a.width);"center"==b.vAlign?a.y=(E.field(a.style,"fontSize")-a.height)/2:"bot"==b.vAlign&&(a.y=E.field(a.style,"fontSize")-a.height)},recursiveApply:function(a,b){for(var c=0,d=a.children;c<d.length;){var f=d[c];++c;e.__instanceof(f,PIXI.Container)&&this.recursiveApply(f,b)}e.__instanceof(a,m)&&b(a)},addWordWrapParams:function(a,
b){0<a.wordWrap&&(b.wordWrap=!0,b.wordWrapWidth=a.wordWrap);return b},__class__:X};var pa=function(a){this.wordWrap=-1;var b=a.split(X.instance.TXT_SEP);if(6>b.length)throw new z("WARNING : TxtDescFlump::TxtDescFlump : invalid params : "+a);this.localId=b[1];this.fontId=b[2];this.size=H.parseInt(b[3]);this.align=b[4];this.color="#"+b[5];6<b.length&&(this.wordWrap=parseFloat(b[6]));7<b.length&&(this.vAlign=b[7])};pa.__name__=!0;pa.prototype={__class__:pa};var R=function(){this.isComplete=!1;this.curRate=
this.toRate=0;this.MAX_POINTS_PER_FRAME=.05;O.call(this)};R.__name__=!0;R.__super__=O;R.prototype=l(O.prototype,{onLoadProgress:function(a){this.toRate=a},onLoadComplete:function(){this.isComplete=!0;this.toRate=1},doLoadFinal:function(){this.doMode=null},setModeProgress:function(){this.doMode=g(this,this.doModeProgress)},doModeProgress:function(a){this.curRate<this.toRate?this.curRate+=Math.min(this.toRate-this.curRate,this.MAX_POINTS_PER_FRAME):1==this.curRate&&this.isComplete&&this.doLoadFinal()},
__class__:R});var J=function(){R.call(this);this.fadeFrontColor=this.bgColor=16777215;this.FADE_DELAY/=2;this.ASSET_ID="screenInitLoad"};J.__name__=!0;J.__super__=R;J.prototype=l(R.prototype,{destroy:function(){e.__cast(this.asset.getContent(),m).getLayer("barFront").getChildAt(0).cacheAsBitmap=null;X.instance.freeLocalTxtInMovie(this.asset.getContent());R.prototype.destroy.call(this)},start:function(){this.setModeProgress()},doLoadFinal:function(){R.prototype.doLoadFinal.call(this);this.shell.onScreenClose(this);
this.setModeFadeFront()},buildContent:function(){R.prototype.buildContent.call(this);e.__cast(this.asset.getContent(),m).getLayer("barFront").getChildAt(0).cacheAsBitmap=!0;X.instance.parseAndSetLocalTxtInMovie(this.asset.getContent());this.refreshBar()},launchAfterInit:function(){this.shell.onScreenReady(this)},doModeProgress:function(a){R.prototype.doModeProgress.call(this,a);this.refreshBar()},refreshBar:function(){e.__cast(this.asset.getContent(),m).getLayer("barFront").getChildAt(0).scale.x=
Math.max(.005,this.curRate)},__class__:J});var ma=function(){this.BAR_RGB=0;this.BAR_RECT=null;R.call(this);this.bgColor=16777215};ma.__name__=!0;ma.__super__=R;ma.prototype=l(R.prototype,{destroy:function(){this.content.removeChild(this.bar);this.bar.destroy();this.bar=null;R.prototype.destroy.call(this)},start:function(){this.setModeProgress()},onLoadProgress:function(a){this.toRate=.5+.5*a},doLoadFinal:function(){R.prototype.doLoadFinal.call(this);this.shell.onScreenClose(this);this.setModeFadeOut()},
buildContent:function(){R.prototype.buildContent.call(this);this.bar=this.content.addChild(new PIXI.Graphics);this.bar.beginFill(this.BAR_RGB);null!=this.BAR_RECT?(this.bar.drawRect(0,0,this.BAR_RECT.width,this.BAR_RECT.height),this.bar.x=this.BAR_RECT.x,this.bar.y=this.BAR_RECT.y):this.bar.drawRect(0,0,h.instance.getScreenRectExt().width,30);this.bar.endFill();this.onResize()},onResize:function(){null==this.BAR_RECT&&(this.bar.x=h.instance.getScreenRect().x,this.bar.y=h.instance.getScreenRect().y);
this.refreshBar()},launchAfterInit:function(){this.shell.onScreenReady(this)},doModeProgress:function(a){R.prototype.doModeProgress.call(this,a);this.refreshBar()},refreshBar:function(){if(null==this.BAR_RECT){var a=Math.max(.005,this.curRate)*h.instance.getScreenRect().width;this.bar.scale.x=a/h.instance.getScreenRectExt().width}else this.bar.scale.x=Math.max(.005,this.curRate)},__class__:ma});var Ga=function(){this.CTRD_DELAY=1500;O.call(this);this.fadeFrontColor=this.bgColor=16777215;this.FADE_DELAY/=
2;this.ASSET_ID="screenSplash"};Ga.__name__=!0;Ga.__super__=O;Ga.prototype=l(O.prototype,{start:function(){this.setModeCtrD()},launchAfterInit:function(){this.shell.onScreenReady(this)},buildContent:function(){O.prototype.buildContent.call(this);Q.getInstance().getLoadingFile(this.asset.getDesc().getFile().getId()).isIMG()&&(this.asset.x=-this.asset.width/2,this.asset.y=-this.asset.height/2)},setModeCtrD:function(){this.ctrDDelay=0;this.doMode=g(this,this.doModeCtrD)},doModeCtrD:function(a){this.ctrDDelay+
a>=this.CTRD_DELAY?(this.shell.onScreenClose(this),this.setModeFadeFront()):this.ctrDDelay+=a},__class__:Ga});var P=function(){this.isTouchpad=this.isDown=!1;this.MOUSE_DUP_PROXIMITY=10;this.TIMEOUT=5E3;var a=this.getEventAnchor();P.instance=this;this.datas=[];a.on("mousedown",g(this,this.onMouseDown));a.on("mouseup",g(this,this.onMouseUp));a.on("mouseupoutside",g(this,this.onMouseUp));a.on("mousemove",g(this,this.onMouseMove));a.on("touchstart",g(this,this.onTouchDown));a.on("touchend",g(this,this.onTouchUp));
a.on("touchendoutside",g(this,this.onTouchUp));a.on("touchmove",g(this,this.onTouchMove));this.switchEnable(!0);N.getInstance().addIterator(g(this,this.doFrame))};P.__name__=!0;P.isOK=function(){return null!=P.instance?P.instance.getEventAnchor().interactive:!1};P.prototype={getTouchOverRect:function(a){for(var b=[],c=0,d=this.datas;c<d.length;){var f=d[c];++c;a.contains(f.coord.x,f.coord.y)&&b.push(f)}return b},getDownTouches:function(){for(var a=[],b=0;b<this.datas.length;)this.datas[b].isDown&&
a.push(this.datas[b]),++b;return a},getTouchId:function(a){null==a&&(a=421);for(var b=0,c=this.datas;b<c.length;){var d=c[b];++b;if(d.id==a)return d}return null},getTouchEvent:function(a,b){null==b&&(b=!1);return b?this.getMouseTouch():this.getTouchId(a.data.identifier)},getPointerCoord:function(){return 0<this.datas.length?this.datas[0].coord:null},switchEnable:function(a){h.instance.traceDebug("INFO : GlobalPointer::switchEnable : "+(null==a?"null":""+a));this.getEventAnchor().interactive=a;this.flush()},
forceCaptureDown:function(a,b){h.instance.traceDebug("WARNING : GlobalPointer::forceCaptureDown : id="+a.data.identifier+" ; isMouse="+(null==b?"null":""+b));if(b)this.onMouseDown(a);else this.onTouchDown(a);a.stopPropagation()},flush:function(){this.isDown=!1;this.datas=[]},doFrame:function(a){for(var b=this.datas.length-1;0<=b;)this.datas[b].delay+=a,this.datas[b].isMouse||this.datas[b].delay>=this.TIMEOUT&&D.remove(this.datas,this.datas[b]),--b;this.checkTouchState()},toString:function(){for(var a=
"",b=0,c=this.datas;b<c.length;){var d=c[b];++b;a+=d.id+":"+Math.round(d.coord.x)+":"+Math.round(d.coord.y)+":"+(d.isDown?"D":"U")+":"+(d.isMouse?"M":"T")+" - "}return a},getRepere:function(){return h.instance.getContent()},onTouchDown:function(a){var b=this.getTouchId(a.data.identifier),c=new K;a.data.getLocalPosition(this.getRepere(),c);null!=b?(b.coord=c,b.delay=0,b.isDown=!0):this.datas.push(new xa(c,!1,!0,a.data.identifier));this.checkTouchState()},onTouchUp:function(a){a=this.getTouchId(a.data.identifier);
null!=a&&(D.remove(this.datas,a),this.checkTouchState())},onTouchMove:function(a){var b=new K,c=this.getTouchId(a.data.identifier);a.data.getLocalPosition(this.getRepere(),b);null!=c?(c.coord=b,c.delay=0,c.isDown=!0):this.datas.push(new xa(b,!1,!0,a.data.identifier));this.checkTouchState()},onMouseDown:function(a){var b=this.getTouchId(a.data.identifier),c=new K;a.data.getLocalPosition(this.getRepere(),c);null!=b?(b.coord=c,b.delay=0,b.isDown=!0,b.isMouse||h.instance.traceDebug("WARNING : GlobalPointer::onMouseDown : not a mouse event : "+
a.data.identifier)):(b=this.findNearestPos(c),null!=b&&(b.coord.x-c.x)*(b.coord.x-c.x)+(b.coord.y-c.y)*(b.coord.y-c.y)<=this.MOUSE_DUP_PROXIMITY*this.MOUSE_DUP_PROXIMITY?(h.instance.traceDebug("WARNING : GlobalPointer::onMouseDown : force mouse to touch : "+a.data.identifier+" -> "+b.id),b.coord=c,b.delay=0,b.isDown=!0):this.datas.push(new xa(c,!0,!0,a.data.identifier)));this.checkTouchState()},onMouseUp:function(a){var b=new K,c=this.getTouchId(a.data.identifier);a.data.getLocalPosition(this.getRepere(),
b);null!=c?(c.coord=b,c.delay=0,c.isDown=!1):(c=this.findNearestPos(b),null!=c&&(c.coord.x-b.x)*(c.coord.x-b.x)+(c.coord.y-b.y)*(c.coord.y-b.y)<=this.MOUSE_DUP_PROXIMITY*this.MOUSE_DUP_PROXIMITY?(h.instance.traceDebug("WARNING : GlobalPointer::onMouseUp : force mouse to touch : "+a.data.identifier+" -> "+c.id+" ; remove"),D.remove(this.datas,c)):this.datas.push(new xa(b,!0,!1,a.data.identifier)));this.checkTouchState()},onMouseMove:function(a){var b=new K,c=this.getTouchId(a.data.identifier);a.data.getLocalPosition(this.getRepere(),
b);null!=c?(c.coord=b,c.delay=0,c.isMouse||h.instance.traceDebug("WARNING : GlobalPointer::onMouseMove : not a mouse event : "+a.data.identifier)):(c=this.findNearestPos(b),null!=c&&(c.coord.x-b.x)*(c.coord.x-b.x)+(c.coord.y-b.y)*(c.coord.y-b.y)<=this.MOUSE_DUP_PROXIMITY*this.MOUSE_DUP_PROXIMITY?(h.instance.traceDebug("WARNING : GlobalPointer::onMouseMove : force mouse to touch : "+a.data.identifier+" -> "+c.id),c.coord=b,c.delay=0):(this.datas.push(new xa(b,!0,!1,a.data.identifier)),this.checkTouchState()))},
getEventAnchor:function(){return h.instance.stage},findNearestPos:function(a,b){null==b&&(b=!1);for(var c=-1,d=null,f,e=0,g=this.datas;e<g.length;){var h=g[e];++e;if(b||!h.isMouse)if(f=(h.coord.x-a.x)*(h.coord.x-a.x)+(h.coord.y-a.y)*(h.coord.y-a.y),0>c||f<c)c=f,d=h}return d},getMouseTouch:function(){for(var a=0,b=this.datas;a<b.length;){var c=b[a];++a;if(c.isMouse)return c}return null},checkTouchState:function(){0<this.datas.length?this.datas[0].isMouse?(this.isTouchpad=!1,this.isDown=this.datas[0].isDown):
this.isDown=this.isTouchpad=!0:this.isDown=!1},__class__:P};var xa=function(a,b,c,d){this.isBound=!1;this.coord=a;this.isMouse=b;this.delay=0;this.isDown=c;this.id=null!=d?d:421};xa.__name__=!0;xa.prototype={__class__:xa};var Z=function(){this.listeners=[]};Z.__name__=!0;Z.getInstance=function(){null==Z.instance&&(Z.instance=new Z);return Z.instance};Z.prototype={addListener:function(a){this.listeners.push(a)},remListener:function(a){D.remove(this.listeners,a)},broadcastResize:function(){for(var a=
0,b=this.listeners;a<b.length;){var c=b[a];++a;c()}},__class__:Z};var ob=function(){};ob.__name__=!0;ob.isIOS=function(){if("undefined"!=typeof window){var a=window.navigator.userAgent.toLowerCase();return-1==a.indexOf("ipad")&&-1==a.indexOf("ipod")?-1!=a.indexOf("iphone"):!0}h.instance.traceDebug("WARNING : VegaBrowserDetect::isIOS : no browser, unable to detect");return!1};var fa=function(a){null==a&&(a=-1);this.timeoutTimeStamp=-1;this._isActive=!0;this.TIMEOUT_DELAY=12E4;this.listeners=[];0<=
a&&(this.TIMEOUT_DELAY=a);"undefined"!=typeof window?(window.onfocus=g(this,this.activate),window.onblur=g(this,this.deactivate),window.document.addEventListener("visibilitychange",g(this,this.onVChange)),this.isSystemActive()&&window.document.hasFocus()||this.deactivate(!1),this.onFocus()):h.instance.traceDebug("ERROR : VegaDeactivator::VegaDeactivator : no browser, ignore deactivate ...")};fa.__name__=!0;fa.getInstance=function(a){null==a&&(a=-1);null==fa.instance&&(fa.instance=new fa(a));return fa.instance};
fa.isInstance=function(){return null!=fa.instance};fa.prototype={addListener:function(a){this.listeners.push(a)},remListener:function(a){D.remove(this.listeners,a)},onVChange:function(){this.isSystemActive()?this.activate():this.deactivate()},isSystemActive:function(){return"visible"==window.document.visibilityState},deactivate:function(a){null==a&&(a=!0);this._isActive&&(h.instance.traceDebug("INFO : VegaDeactivator::deactivate"),this._isActive=!1,N.getInstance().switchPause(!0),h.instance.forceFPS(1),
h.instance.pauseRendering(),C.getInstance().switchMute(!0),this.timeoutTimeStamp=a?(new Date).getTime():-1,h.instance.canvas.addEventListener("mousedown",g(this,this.onFocus)),h.instance.canvas.addEventListener("mousemove",g(this,this.onFocus)),h.instance.canvas.addEventListener("touchstart",g(this,this.onFocus)),h.instance.canvas.addEventListener("touchmove",g(this,this.onFocus)),this.callListeners(!0))},activate:function(){if(!this._isActive)if(0<=this.timeoutTimeStamp&&(new Date).getTime()-this.timeoutTimeStamp>=
this.TIMEOUT_DELAY)this.onTimeout();else h.instance.traceDebug("INFO : VegaDeactivator::activate"),this._isActive=!0,N.getInstance().switchPause(!1),h.instance.restaureFPS(),h.instance.resumeRendering(),h.instance.refreshRender(),C.getInstance().switchMute(!1),null!=P.instance&&P.instance.flush(),sa.getInstance().flush(),h.instance.canvas.removeEventListener("mousedown",g(this,this.onFocus)),h.instance.canvas.removeEventListener("mousemove",g(this,this.onFocus)),h.instance.canvas.removeEventListener("touchstart",
g(this,this.onFocus)),h.instance.canvas.removeEventListener("touchmove",g(this,this.onFocus)),this.callListeners(!1)},onTimeout:function(){h.instance.reload()},onFocus:function(){window.focus()},get_isActive:function(){return this._isActive},callListeners:function(a){for(var b=this.listeners.slice(),c=0;c<b.length;){var d=b[c];++c;-1!=this.listeners.indexOf(d)&&d(a)}},__class__:fa,__properties__:{get_isActive:"get_isActive"}};var N=function(){this.hasRequest=this.isPause=this.isError=!1;this.iterators=
[];this.lastTime=(new Date).getTime();if("undefined"!=typeof window)this.onFrame(0);else h.instance.traceDebug("ERROR : VegaFramer::VegaFramer : no browser, no framing ...")};N.__name__=!0;N.getInstance=function(){null==N.instance&&(N.instance=new N);return N.instance};N.prototype={isRegistered:function(a){return-1!=this.iterators.indexOf(a)},addIterator:function(a){this.iterators.push(a)},remIterator:function(a){D.remove(this.iterators,a)},switchPause:function(a){!this.isPause||a||this.hasRequest||
(this.lastTime=(new Date).getTime(),this.requestFrame());this.isPause=a},onFrame:function(a){if(h.instance.debug){if(!this.isError)try{this.doFrame(a)}catch(b){b instanceof z&&(b=b.val),h.instance.traceDebug("ERROR :"+H.string(b).split("\n")[0]),console.log(b),this.isError=!0}}else this.doFrame(a)},doFrame:function(a){if(this.isPause)this.hasRequest=!1;else{this.requestFrame();a=(new Date).getTime();var b=1E3/h.instance.get_fps();var c=Math.min(a-this.lastTime,3*b);if(c>=b){var d=Math.min(c-b,b/2);
c-=d;b=this.iterators.slice();for(var f=0;f<b.length;){var e=b[f];++f;this.isPause||-1==this.iterators.indexOf(e)||e(c)}this.lastTime=a-d}}},requestFrame:function(){this.hasRequest=!0;window.requestAnimationFrame(g(this,this.onFrame))},__class__:N};var sa=function(){this.tmpVal=0;this.isTmpVal=!1;this.accelStack=null;this.motionOK=!1;this.STACK_MAX=4};sa.__name__=!0;sa.getInstance=function(){null==sa.instance&&(sa.instance=new sa);return sa.instance};sa.prototype={init:function(){"undefined"!=typeof window&&
null!=window.orientation?(window.addEventListener("devicemotion",g(this,this.onDeviceMotion)),window.addEventListener("orientationchange",g(this,this.onOrientChange))):h.instance.traceDebug("WARNING : VegaOrient::init : unsupported, no orient")},flush:function(){this.motionOK&&(this.accelStack=[])},getInclinaison:function(){var a=0;if(this.motionOK&&0<this.accelStack.length){if(this.isTmpVal)return this.tmpVal;for(var b=0,c=this.accelStack;b<c.length;){var d=c[b];++b;a+=d}this.tmpVal=a/=this.accelStack.length;
this.isTmpVal=!0}return a},onDeviceMotion:function(a){if(!this.motionOK)if(null!=a.accelerationIncludingGravity&&0!=a.accelerationIncludingGravity.x&&0!=a.accelerationIncludingGravity.y&&0!=a.accelerationIncludingGravity.z)this.accelStack=[],this.motionOK=!0;else return;this.isTmpVal=!1;this.accelStack.push(this.procInclinaison(a.accelerationIncludingGravity.x,a.accelerationIncludingGravity.y,a.accelerationIncludingGravity.z));this.accelStack.length>this.STACK_MAX&&this.accelStack.shift()},onOrientChange:function(a){h.instance.traceDebug("INFO : VegaOrient::onOrientChange : "+
window.orientation)},procInclinaison:function(a,b,c){c=Math.sqrt(a*a+b*b+c*c);ob.isIOS()&&(a=-a,b=-b);a=Math.asin(Math.max(-1,Math.min(1,a/c)));b=Math.asin(Math.max(-1,Math.min(1,b/c)));if(0==window.orientation)return a;if(-90==window.orientation)return b;if(90==window.orientation)return-b;if(180==window.orientation)return-a;h.instance.traceDebug("WARNING : VegaOrient::procInclinaison : unrecognized ref orient : "+window.orientation);return 0},__class__:sa};var ja=function(){};ja.__name__=!0;ja.prototype=
{__class__:ja};var ta=function(){};ta.__name__=!0;ta.prototype={__class__:ta};var Ia=function(){};Ia.__name__=!0;Ia.prototype={__class__:Ia};var ka=function(){};ka.__name__=!0;ka.prototype={__class__:ka};var Pa=function(a,b,c,d,f){this._options=this._howl=this._fileResId=this._localExts=null;this._id=a;this._playMode=f;this._options=null==c?{}:c;null!=d&&(this._localExts=d);if(null==this._options.src){if(null==b)b=new W(this._id);else if(""==b.getName()||null==b.getName())b=new W(a,b.getPath(),b.getVersion());
c=b.getName();f=null!=b.getPath()?b.getPath():"";c=-1!=c.indexOf("://")?c:f+c;null==d&&(d=C.getInstance().getExts());for(this._options.src=[];this._options.src.length<d.length;)this._options.src.push(v.addVersionToUrl(c+d[this._options.src.length],v.getVersionUrl(b)))}this._fileResId=null==b?new W(a):b};Pa.__name__=!0;Pa.prototype={forceAntiCache:function(){var a=null!=this._localExts?this._localExts:C.getInstance().getExts();var b=""==this._fileResId.getName()||null==this._fileResId.getName()?new W(this._id,
this._fileResId.getPath(),this._fileResId.getVersion()):this._fileResId;var c=b.getName();var d=null!=b.getPath()?b.getPath():"";c=-1!=c.indexOf("://")?c:d+c;for(this._options.src=[];this._options.src.length<a.length;)this._options.src.push(v.addVersionToUrl(c+a[this._options.src.length],v.getVersionUrl(b,!0)))},getIsLoaded:function(){return null!=this._howl?"loaded"==this._howl.state():!1},destroy:function(){this._fileResId=this._howl=this._options=null},regHowl:function(a){this._howl=a},getHowl:function(){return this._howl},
getId:function(){return this._id},getOptions:function(){return this._options},getFileResId:function(){return this._fileResId},get_playMode:function(){return this._playMode},__class__:Pa,__properties__:{get_playMode:"get_playMode"}};var mb=function(a){this._volume=1;this.doMode=null;this.createTimestamp=this.playTimestamp=this.openTimestamp=-1;this.mode=null;this._chan=-1;this.PLAY_DELAI_MAX=1500;this._track=a;N.getInstance().addIterator(g(this,this.onFrame));this.createTimestamp=(new Date).getTime()};
mb.__name__=!0;mb.prototype={play:function(a){this.mode=a;this.checkMax();e.__instanceof(this.mode,ta)?this.setModeDelayed():this.regChainedTracks()||this.tryUnloadedTrackOpenChan()},playInvalid:function(a){h.instance.traceDebug("WARNING : SndInstance::playInvalid : "+this._track.getDesc().getId());this.mode=a;this.checkMax();e.__instanceof(this.mode,ta)?this.setModeDelayedInvalid():(this.regChainedTracks(),this.setModeOpenChanInvalid())},getTimestamp:function(){return 0<=this.openTimestamp?this.openTimestamp:
0<=this.playTimestamp?this.playTimestamp:this.createTimestamp},updateVolume:function(){0<=this._chan&&(0<=this._track.get_volumeCoef()?this._track.getDesc().getHowl().volume(this._track.getDesc().getHowl().volume()*this._track.get_volumeCoef()*this._volume,this._chan):this._track.getDesc().getHowl().volume(this._track.getDesc().getHowl().volume()*this._volume,this._chan))},get_volume:function(){return this._volume},set_volume:function(a){this._volume=a;this.updateVolume();return this._volume},regChainedTracks:function(){if(e.__instanceof(this.mode,
ja)&&C.getInstance().isPlaying(e.__cast(this.mode,ja).getChainedSubId())){var a=C.getInstance().getSndTracks(e.__cast(this.mode,ja).getChainedSubId());for(var b=0;b<a.length;){var c=a[b];++b;c.isPlaying()&&c.addEndListener(g(this,this.onSndChainEnd))}return!0}return!1},onFrame:function(a){null!=this.doMode&&this.doMode()},tryUnloadedTrackOpenChan:function(){this._track.getDesc().getIsLoaded()?this.openChan():this.setModeOpenChanInvalid()},setModeOpenChanInvalid:function(){this.openTimestamp=-1;this.playTimestamp=
(new Date).getTime();this.doMode=g(this,this.doModeOpenChanInvalid)},doModeOpenChanInvalid:function(){this._track.getDesc().getIsLoaded()&&C.getInstance().isUnlocked()?this.checkTimestampPlay():this.checkTimestampStop()},setModeDelayed:function(){this.openTimestamp=e.__cast(this.mode,ta).getDelayedStartTime();this.doMode=g(this,this.doModeDelayed)},doModeDelayed:function(){(new Date).getTime()>=e.__cast(this.mode,ta).getDelayedStartTime()&&(this.regChainedTracks()||this.tryUnloadedTrackOpenChan())},
setModeDelayedInvalid:function(){this.openTimestamp=e.__cast(this.mode,ta).getDelayedStartTime();this.doMode=g(this,this.doModeDelayedInvalid)},doModeDelayedInvalid:function(){(new Date).getTime()>=e.__cast(this.mode,ta).getDelayedStartTime()&&(this.regChainedTracks(),this.setModeOpenChanInvalid())},stop:function(){0<=this._chan&&(this._track.getDesc().getHowl().stop(this._chan),this._chan=-1);if(e.__instanceof(this.mode,ja)){var a=C.getInstance().getSndTracks(e.__cast(this.mode,ja).getChainedSubId());
for(var b=0;b<a.length;){var c=a[b];++b;c.remEndListener(g(this,this.onSndChainEnd))}}this.onSndEnd()},checkTimestampStop:function(){0<this.playTimestamp&&!this._track.getDesc().getOptions().loop&&(new Date).getTime()-this.playTimestamp>this.PLAY_DELAI_MAX&&(h.instance.traceDebug("WARNING : SndInstance::checkTimestampStop : too late, stop : "+this._track.getDesc().getId()),this.stop())},checkTimestampPlay:function(){if(0<this.playTimestamp)if(this._track.getDesc().getOptions().loop||(new Date).getTime()-
this.playTimestamp<=this.PLAY_DELAI_MAX)if(h.instance.traceDebug("INFO : SndInstance::checkTimestampPlay : loaded, resume play : "+this._track.getDesc().getId()),e.__instanceof(this.mode,ja))this.onSndChainEnd();else this.openChan();else h.instance.traceDebug("WARNING : SndInstance::checkTimestampPlay : loaded, too late, stop : "+this._track.getDesc().getId()),this.stop()},checkMax:function(){if(e.__instanceof(this.mode,Ia)){var a=e.__cast(this.mode,Ia).getMaxNb();var b=C.getInstance().getSndTracks(e.__cast(this.mode,
Ia).getMaxSubId());var c=[];for(var d=0;d<b.length;){var f=b[d];++d;var h=0;for(f=f.get_channels();h<f.length;){var k=f[h];++h;k!=this&&c.push(k)}}if(c.length>a)for(c.sort(g(this,this.cmpTimestamp)),b=0,a=c.length-a;b<a;)c[b++].stop()}},cmpTimestamp:function(a,b){return a.getTimestamp()>b.getTimestamp()?1:a.getTimestamp()<b.getTimestamp()?-1:0},openChan:function(){var a=(new Date).getTime();this.doMode=null;C.getInstance().isUnlocked()||h.instance.traceDebug("WARNING : SndInstance::openChan : unlocker ? : "+
this._track.getDesc().getId());if(!e.__instanceof(this.mode,ka)||this._track.getDesc().getOptions().loop||a-e.__cast(this.mode,ka).getSyncStartedAtTime()<1E3*this._track.getDesc().getHowl().duration())this._chan=this._track.getDesc().getHowl().play();0<=this._chan?(this._track.getDesc().getHowl().on("end",g(this,this.onSndEnd),this._chan),this.playTimestamp=-1,e.__instanceof(this.mode,ka)?(this._track.getDesc().getHowl().seek((a-e.__cast(this.mode,ka).getSyncStartedAtTime())/1E3%this._track.getDesc().getHowl().duration(),
this._chan),this.openTimestamp=e.__cast(this.mode,ka).getSyncStartedAtTime()):this.openTimestamp=a,this.updateVolume(),h.instance.traceDebug("INFO : SndInstance::openChan : "+this._track.getDesc().getId()+" : "+this._chan)):(h.instance.traceDebug("ERROR : SndInstance::openChan : "+this._track.getDesc().getId()+" : "+this._chan),this.onSndEnd())},onSndEnd:function(){if(null!=this._track){if(0<=this._chan){if(this._track.getDesc().getOptions().loop){this._track.getDesc().getHowl().playing(this._chan)?
(h.instance.traceDebug("INFO : SndInstance::onSndEnd : loop "+this._track.getDesc().getId()+" : "+this._chan),e.__instanceof(this.mode,ka)||this._track.getDesc().getHowl().seek(0,this._chan)):(h.instance.traceDebug("WARNING : SndInstance::onSndEnd : broken loop, restart : "+this._track.getDesc().getId()+" : "+this._chan),this._chan=this._track.getDesc().getHowl().play());e.__instanceof(this.mode,ka)&&this._track.getDesc().getHowl().seek(((new Date).getTime()-e.__cast(this.mode,ka).getSyncStartedAtTime())/
1E3%this._track.getDesc().getHowl().duration(),this._chan);return}this._track.getDesc().getHowl().off("end",g(this,this.onSndEnd),this._chan)}this.doMode=null;N.getInstance().remIterator(g(this,this.onFrame));h.instance.traceDebug("INFO : SndInstance::onSndEnd : "+this._track.getDesc().getId()+" : "+this._chan);this._track.onChanStop(this);this.mode=this._track=null;this._chan=-1}},onSndChainEnd:function(){if(this._track.getDesc().getIsLoaded()&&C.getInstance().isUnlocked()&&!C.getInstance().isPlaying(e.__cast(this.mode,
ja).getChainedSubId())){var a=C.getInstance().getSndTracks(e.__cast(this.mode,ja).getChainedSubId());for(var b=0;b<a.length;){var c=a[b];++b;c.remEndListener(g(this,this.onSndChainEnd))}h.instance.traceDebug("INFO : SndInstance::onSndChainEnd : play "+this._track.getDesc().getId());this.tryUnloadedTrackOpenChan()}},get_chan:function(){return this._chan},get_track:function(){return this._track},__class__:mb,__properties__:{set_volume:"set_volume",get_volume:"get_volume",get_chan:"get_chan",get_track:"get_track"}};
var C=function(a){this.firstSndLock=this._isInitEnd=this.isMute=!1;this.tracks=null;this.exts=[".mp3",".ogg"];this._vol=a;Howler.init();this.tracks=new A;if(this.isHowlerEndInit())this.onHowlerEndInit();else N.getInstance().addIterator(g(this,this.checkHolwerEndInit))};C.__name__=!0;C.getInstance=function(a){null==a&&(a=1);null==C.current&&(C.current=new C(a));return C.current};C.prototype={switchMute:function(a){this._isInitEnd&&Howler.mute(a);this.isMute=a},getExts:function(){return this.exts},
addSndDesc:function(a,b){null==b&&(b=!1);var c=this.tracks,d=a.getId();(null!=p[d]?c.existsReserved(d):c.h.hasOwnProperty(d))?h.instance.traceDebug("WARNING : SndMgr::addSndDesc : sound already defined, ignore : "+a.getId()):(c=this.tracks,d=a.getId(),a=new Wa(a,b),null!=p[d]?c.setReserved(d,a):c.h[d]=a)},unload:function(a){var b=this.tracks;for(b=new G(b,b.arrayKeys());b.hasNext();){var c=b.next();if(null==a||-1!=c.getDesc().getId().indexOf(a))this.tracks.remove(c.getDesc().getId()),c.destroy()}},
play:function(a,b,c){null==c&&(c=!1);h.instance.traceDebug("INFO : SndMgr::play : "+a);var d=this.tracks;if(null!=p[a]?!d.existsReserved(a):!d.h.hasOwnProperty(a)){h.instance.traceDebug("WARNING : SndMgr::play : unregistered sound, create new record : "+a);var f=new Pa(a);f.getOptions().preload=!1;f.getOptions().autoplay=!1;f.regHowl(new Howl(f.getOptions()));d=this.tracks;f=new Wa(f);null!=p[a]?d.setReserved(a,f):d.h[a]=f}this.isUnlocked()||this.canUnlockSound()&&c?d=!0:(d=this.tracks,d=(null!=p[a]?
d.getReserved(a):d.h[a]).getDesc().getOptions().loop);if(d)return d=this.tracks,(null!=p[a]?d.getReserved(a):d.h[a]).play(b,!this.isUnlocked()&&!c);h.instance.traceDebug("WARNING : SndMgr::play : sounds locked, ignore "+a);return null},stop:function(a,b){var c=this.tracks;for(c=new G(c,c.arrayKeys());c.hasNext();){var d=c.next();if(null==a||-1!=d.getDesc().getId().indexOf(a))null!=b&&-1!=d.getDesc().getId().indexOf(b)||d.stop()}},isPlaying:function(a,b){var c=this.tracks;for(c=new G(c,c.arrayKeys());c.hasNext();){var d=
c.next();if(!(null!=a&&-1==d.getDesc().getId().indexOf(a)||null!=b&&-1!=d.getDesc().getId().indexOf(b))&&d.isPlaying())return!0}return!1},getSndTracks:function(a){var b=[],c=this.tracks;for(c=new G(c,c.arrayKeys());c.hasNext();){var d=c.next();null!=a&&-1==d.getDesc().getId().indexOf(a)||b.push(d)}return b},setVolumeCoef:function(a,b){var c=this.tracks;for(c=new G(c,c.arrayKeys());c.hasNext();){var d=c.next();null!=a&&-1==d.getDesc().getId().indexOf(a)||d.setVolumeCoef(b)}},isUnlocked:function(){return this._isInitEnd?
Howler.usingWebAudio?null!=Howler.ctx?0<Howler.ctx.currentTime:!1:!0:!1},canUnlockSound:function(){return null!=Howler.ctx},checkHolwerEndInit:function(a){this.isHowlerEndInit()&&(N.getInstance().remIterator(g(this,this.checkHolwerEndInit)),this.onHowlerEndInit())},isHowlerEndInit:function(){if(this._isInitEnd)return!0;try{return Howler.volume(this._vol),Howler.mute(this.isMute),this._isInitEnd=!0}catch(a){return!1}},onHowlerEndInit:function(){h.instance.traceDebug("INFO : SndMgr::onHowlerEndInit",
!0);for(var a=0,b=this.exts;a<b.length;){var c=b[a];++a;h.instance.traceDebug("INFO : SndMgr::onHowlerEndInit : codec "+c+" : "+H.string(Howler.codecs(D.substr(c,1,null))),!0)}h.instance.traceDebug("INFO : SndMgr::onHowlerEndInit : ctx="+H.string(Howler.ctx),!0);null!=Howler.ctx&&h.instance.traceDebug("INFO : SndMgr::onHowlerEndInit : ctx.time="+Howler.ctx.currentTime,!0);null!=Howler.ctx&&h.instance.traceDebug("INFO : SndMgr::onHowlerEndInit : ctx.rate="+Howler.ctx.sampleRate,!0)},__class__:C};var Wa=
function(a,b){null==b&&(b=!1);this._volumeCoef=-1;this.isLoading=!1;this._desc=a;this._channels=[];this.endListeners=[];b&&!this._desc.getIsLoaded()&&this.doLoad()};Wa.__name__=!0;Wa.prototype={destroy:function(){Q.getInstance().freeLoadedFileMem(this._desc.getFileResId());this.stop();this._desc.getIsLoaded()&&this._desc.getHowl().unload();this.isLoading&&this.remLoadListener();this._desc.destroy();this._desc=this.endListeners=this._channels=null},getDesc:function(){return this._desc},play:function(a,
b){null==b&&(b=!1);return this.addSndInstance(null==a?this._desc.get_playMode():a,b)},stop:function(){for(var a=this._channels.slice(),b=0;b<a.length;){var c=a[b];++b;-1!=this._channels.indexOf(c)&&c.stop()}},isPlaying:function(){return 0<this._channels.length},onChanStop:function(a){D.remove(this._channels,a);if(!this.isPlaying()){a=this.endListeners.slice();for(var b=0;b<a.length;){var c=a[b];++b;-1!=this.endListeners.indexOf(c)&&c()}}},addEndListener:function(a){this.endListeners.push(a)},remEndListener:function(a){D.remove(this.endListeners,
a)},setVolumeCoef:function(a){this._volumeCoef=0>a?-1:a;a=0;for(var b=this._channels;a<b.length;){var c=b[a];++a;c.updateVolume()}},addSndInstance:function(a,b){null==b&&(b=!1);var c=new mb(this);this._channels.push(c);b?c.playInvalid(a):c.play(a);this._desc.getIsLoaded()||this.isLoading||this.doLoad();return c},doLoad:function(){h.instance.traceDebug("INFO : SndTrack::doLoad : "+this._desc.getId()+" : "+this._desc.getHowl().state());this.isLoading=!0;this._desc.getHowl().load();this._desc.getHowl().on("load",
g(this,this.onTrackLoaded));this._desc.getHowl().on("loaderror",g(this,this.onTrackLoadError))},remLoadListener:function(){this._desc.getHowl().off("load",g(this,this.onTrackLoaded));this._desc.getHowl().off("loaderror",g(this,this.onTrackLoadError))},onTrackLoaded:function(){var a=this._channels.length-1;h.instance.traceDebug("INFO : SndTrack::onTrackLoaded : "+this._desc.getId());Q.getInstance().regLoadedFile(new Ha(this._desc));this.remLoadListener();for(this.isLoading=!1;0<=a;)this._channels[a--].checkTimestampPlay()},
onTrackLoadError:function(){h.instance.traceDebug("ERROR : SndTrack::onTrackLoadError : "+this._desc.getId());this.remLoadListener();this.isLoading=!1;this.stop()},get_channels:function(){return this._channels},get_volumeCoef:function(){return this._volumeCoef},__class__:Wa,__properties__:{get_volumeCoef:"get_volumeCoef",get_channels:"get_channels"}};var aa=function(a,b,c,d,f){null==f&&(f=!1);null==d&&(d=!1);this.isDown=this.isPause=!1;this.container=a;this.onDownCB=[];this.onReleaseCB=c;this.autoPlay=
d;this.isPreservFrame=f;this.onPressCB=[];this.onMouseOverCB=[];null!=b&&this.onDownCB.push(b);this.hit=a.getLayer("hit").getChildAt(0);this.hit.alpha=0;this.hit.buttonMode=!0;this.hit.interactive=!0;this.hit.on("mousedown",g(this,this.onDown));this.hit.on("mouseover",g(this,this.onOver));this.hit.on("mouseup",g(this,this.onUp));this.hit.on("mouseout",g(this,this.onOut));this.hit.on("touchstart",g(this,this.onTDown));this.hit.on("touchmove",g(this,this.onTOver));this.hit.on("touchend",g(this,this.onTUp));
this.hit.on("touchendoutside",g(this,this.onTUpOut));this.stateUp=a.getLayer("up").getChildAt(0);this.stateUp.interactive=!1;this.stateUp.visible=!1;null!=k.getLayer("over",a)&&(this.stateOver=a.getLayer("over").getChildAt(0),this.stateOver.interactive=!1,this.stateOver.visible=!1);null!=k.getLayer("down",a)&&(this.stateDown=a.getLayer("down").getChildAt(0),this.stateDown.interactive=!1,this.stateDown.visible=!1);null!=k.getLayer("select",a)&&(this.stateSelect=a.getLayer("select").getChildAt(0),this.stateSelect.interactive=
!1,this.stateSelect.visible=!1);null!=k.getLayer("selectDown",a)&&(this.stateSelectDown=a.getLayer("selectDown").getChildAt(0),this.stateSelectDown.interactive=!1,this.stateSelectDown.visible=!1);null!=k.getLayer("selectOver",a)&&(this.stateSelectOver=a.getLayer("selectOver").getChildAt(0),this.stateSelectOver.interactive=!1,this.stateSelectOver.visible=!1);null!=k.getLayer("disable",a)&&(this.stateDisable=a.getLayer("disable").getChildAt(0),this.stateDisable.interactive=!1,this.stateDisable.visible=
!1);this.enableState(this.stateUp)};aa.__name__=!0;aa.prototype={destroy:function(){null!=this.curState&&this.autoPlay&&e.__instanceof(this.curState,PIXI.Container)&&k.recursiveGotoAndStop(this.curState,0);this.hit.off("mousedown",g(this,this.onDown));this.hit.off("touchstart",g(this,this.onTDown));this.hit.off("mouseover",g(this,this.onOver));this.hit.off("touchmove",g(this,this.onTOver));this.hit.off("mouseup",g(this,this.onUp));this.hit.off("touchend",g(this,this.onTUp));this.hit.off("touchendoutside",
g(this,this.onTUpOut));this.hit.off("mouseout",g(this,this.onOut));this.hit.buttonMode=!1;this.hit.interactive=!1;this.container.visible=!0;null!=this.stateUp&&(this.stateUp.visible=!0,this.stateUp=null);null!=this.stateOver&&(this.stateOver.visible=!0,this.stateOver=null);null!=this.stateDown&&(this.stateDown.visible=!0,this.stateDown=null);null!=this.stateSelect&&(this.stateSelect.visible=!0,this.stateSelect=null);null!=this.stateSelectOver&&(this.stateSelectOver.visible=!0,this.stateSelectOver=
null);null!=this.stateSelectDown&&(this.stateSelectDown.visible=!0,this.stateSelectDown=null);this.container=this.onReleaseCB=this.onDownCB=this.onMouseOverCB=this.onPressCB=this.hit=this.curState=null},addDownListener:function(a){this.onDownCB.push(a)},addPressListener:function(a){this.onPressCB.push(a)},addMouseOverListener:function(a){this.onMouseOverCB.push(a)},getModel:function(){return this.container},getCurState:function(){return this.curState},switchEnable:function(a){this.hit.buttonMode=
a;(this.hit.interactive=a)?null!=this.stateDisable&&this.curState==this.stateDisable&&this.enableState(this.stateUp):null!=this.stateDisable&&this.enableState(this.stateDisable)},switchAnim:function(a){a?this.autoPlay||(this.autoPlay=!0,!this.isPause&&null!=this.curState&&e.__instanceof(this.curState,PIXI.Container)&&k.recursivePlay(this.curState)):this.autoPlay&&(this.autoPlay=!1,!this.isPause&&null!=this.curState&&e.__instanceof(this.curState,PIXI.Container)&&k.recursiveGotoAndStop(this.curState,
0))},switchPause:function(a){this.autoPlay&&(a?this.isPause||null!=this.curState&&e.__instanceof(this.curState,PIXI.Container)&&k.recursiveStop(this.curState):this.isPause&&null!=this.curState&&e.__instanceof(this.curState,PIXI.Container)&&k.recursivePlay(this.curState));this.isPause=a},unselect:function(){null!=this.stateUp&&this.enableState(this.stateUp)},select:function(){null!=this.stateSelect&&this.enableState(this.stateSelect)},reset:function(){this.enableState(this.stateUp)},hide:function(){this.reset();
this.container.visible=!1},show:function(){this.reset();this.container.visible=!0},enableState:function(a){var b=0;return a!=this.curState?(null!=this.curState&&(this.isPreservFrame&&e.__instanceof(this.curState,m)&&(b=e.__cast(this.curState,m).get_currentFrame()),this.autoPlay&&e.__instanceof(this.curState,PIXI.Container)&&k.recursiveGotoAndStop(this.curState,0),this.curState.visible=!1),this.curState=a,null!=this.curState&&(this.curState.visible=!0,this.isPreservFrame&&e.__instanceof(this.curState,
m)&&k.recursiveGotoAndStop(this.curState,b),!this.isPause&&this.autoPlay&&e.__instanceof(this.curState,PIXI.Container)&&k.recursivePlay(this.curState)),!0):!1},isSelect:function(){return null!=this.curState?this.curState!=this.stateSelect&&this.curState!=this.stateSelectDown?this.curState==this.stateSelectOver:!0:!1},onTOver:function(a){this.isSelect()?null!=this.stateSelectOver&&this.isOver()?this.enableState(this.stateSelectOver):this.enableState(this.stateSelect):null!=this.stateOver&&this.isOver()?
this.enableState(this.stateOver):this.enableState(this.stateUp)},onOver:function(a){this.isSelect()?null!=this.stateSelectOver?this.enableState(this.stateSelectOver):this.enableState(this.stateSelect):null!=this.stateOver?this.enableState(this.stateOver):this.enableState(this.stateUp);this.callListeners(this.onMouseOverCB,a)},onTUp:function(a){var b=this.isDown;this.onTUpOut(a);if(b&&null!=this.onReleaseCB)this.onReleaseCB(a)},onTUpOut:function(a){this.isDown=!1;this.isSelect()?this.enableState(this.stateSelect):
this.enableState(this.stateUp)},onUp:function(a){var b=this.isDown;this.isDown=!1;this.isSelect()?null!=this.stateSelectOver&&this.isOver()?this.enableState(this.stateSelectOver):this.enableState(this.stateSelect):null!=this.stateOver&&this.isOver()?this.enableState(this.stateOver):this.enableState(this.stateUp);if(b){if(null!=this.onReleaseCB)this.onReleaseCB(a);this.callListeners(this.onPressCB,a)}},onTDown:function(a){this.onDown(a,!1)},onDown:function(a,b){null==b&&(b=!0);this.isDown=!0;P.isOK()&&
P.instance.forceCaptureDown(a,b);this.isSelect()?null!=this.stateSelectDown?this.enableState(this.stateSelectDown):null!=this.stateSelectOver?this.enableState(this.stateSelectOver):this.enableState(this.stateSelect):null!=this.stateDown?this.enableState(this.stateDown):null!=this.stateOver?this.enableState(this.stateOver):this.enableState(this.stateUp);this.callListeners(this.onDownCB,a);b||this.callListeners(this.onPressCB,a)},onOut:function(a){this.isDown=!1;this.isSelect()?this.enableState(this.stateSelect):
this.enableState(this.stateUp)},isOver:function(){return this.isDown?!1:P.isOK()?0<P.instance.getTouchOverRect(t.getContentBounds(this.hit)).length:!0},callListeners:function(a,b){if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c;d(b)}},__class__:aa};var K=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};K.__name__=!0;K.prototype={clone:function(){return new K(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y},equals:function(a){return this.x==a.x?this.y==a.y:!1},__class__:K};
var k=function(){};k.__name__=!0;k.getDescMc=function(a,b){a=x.get(a).library.movies;return null!=p[b]?a.getReserved(b):a.h[b]};k.getLayerWithPrefix=function(a,b,c){return k.getLayerWithPrefixInSymbol(a,k.getDescMc(b,c))};k.getLayerWithPrefixInMovie=function(a,b){return k.getLayerWithPrefixInSymbol(a,b.symbol)};k.getLayersWithPrefixInMovie=function(a,b){return k.getLayersWithPrefixInSymbol(a,b.symbol)};k.getLayer=function(a,b){return null!=k.getLayerWithPrefixInSymbol(a,b.symbol,!0)?b.getLayer(a):
null};k.getLayers=function(a){return a.symbol.layers};k.testHitMultiBox=function(a,b){for(var c=k.getLayers(a),d,f,e=0;e<c.length;)if(d=c[e],++e,f=a.getLayer(d.name),d=new K,f.toLocal(b,a,d),f.getLocalBounds().contains(d.x,d.y))return!0;return!1};k.setCloneLayer=function(a,b,c,d){null==d&&(d=!1);var f=a.getLayer(b),g=f.getChildAt(0),h=k.getSymbolId(g);b+="vegaClone";d&&(f.visible=!1);null!=c&&(b+=c);c=a.getChildByName(b);null==c?(null!=L.instance&&null!=L.instance.getAssetDescById(h)?(c=a.addChildAt(L.instance.getAssetInstance(h),
a.getChildIndex(f)),a=e.__cast(c,ia).getContent()):(c=a.addChildAt(new PIXI.Container,a.getChildIndex(f)),a=e.__instanceof(g,m)?new m(e.__cast(g,m).get_symbolId(),e.__cast(g,m).resourceId):new ba(e.__cast(g,ba).symbolId,e.__cast(g,ba).resourceId),c.addChild(a)),c.name=b):a=c.getChildAt(0);c.x=f.x;c.y=f.y;c.skew.x=f.skew.x;c.skew.y=f.skew.y;c.alpha=f.alpha;a.x=g.x;a.y=g.y;a.scale.x=g.scale.x;a.scale.y=g.scale.y;a.pivot.x=g.pivot.x;a.pivot.y=g.pivot.y;return c};k.unsetCloneLayer=function(a,b,c,d){b+=
"vegaClone";null!=c&&(b+=c);c=null!=d?d:a.getChildByName(b);d=c.getChildAt(0);e.__instanceof(c,ia)?(c.skew.x=0,c.skew.y=0,c.alpha=1,d.scale.x=1,d.scale.y=1,d.pivot.x=0,d.pivot.y=0,d.x=0,d.y=0,e.__cast(a.removeChild(c),ia).free()):(c.removeChild(d).destroy(),a.removeChild(c).destroy())};k.unsetCloneLayers=function(a){for(var b=a.children.slice(),c=0;c<b.length;){var d=b[c];++c;-1!=d.name.indexOf("vegaClone")&&(d.name.indexOf("vegaClone")+9<d.name.length?k.unsetCloneLayer(a,D.substr(d.name,0,d.name.indexOf("vegaClone")),
D.substr(d.name,d.name.indexOf("vegaClone")+9,null)):k.unsetCloneLayer(a,D.substr(d.name,0,d.name.indexOf("vegaClone"))))}};k.getMovieFrameTime=function(a){return x.getResourceForMovie(a).library.frameTime};k.getTextureFromSpId=function(a){var b=x.getResourceForSprite(a),c=b.textures;b=b.library.sprites;a=(null!=p[a]?b.getReserved(a):b.h[a]).texture;return null!=p[a]?c.getReserved(a):c.h[a]};k.getLayerName=function(a){if(e.__instanceof(a.parent,m))for(var b=0,c=e.__cast(a.parent,m).symbol.layers;b<
c.length;){var d=c[b];++b;if(e.__cast(a.parent,m).getLayer(d.name)==a)return d.name}return null};k.getContent=function(a,b){return a.getLayer(b).getChildAt(0)};k.getSymbolId=function(a){return e.__instanceof(a,m)?e.__cast(a,m).get_symbolId():e.__instanceof(a,ba)?e.__cast(a,ba).symbolId:null};k.gotoSyncDate=function(a){a.gotoAndStop(Math.floor((new Date).getTime()/k.getMovieFrameTime(a.get_symbolId()))%a.get_totalFrames());return a};k.recursiveStop=function(a){e.__instanceof(a,m)&&e.__cast(a,m).stop();
var b=0;for(a=a.children;b<a.length;){var c=a[b];++b;e.__instanceof(c,PIXI.Container)&&k.recursiveStop(c)}};k.recursivePlay=function(a){e.__instanceof(a,m)&&e.__cast(a,m).play();var b=0;for(a=a.children;b<a.length;){var c=a[b];++b;e.__instanceof(c,PIXI.Container)&&k.recursivePlay(c)}};k.recursiveGotoAndStop=function(a,b){e.__instanceof(a,m)&&e.__cast(a,m).gotoAndStop(b);var c=0;for(a=a.children;c<a.length;){var d=a[c];++c;e.__instanceof(d,PIXI.Container)&&k.recursiveGotoAndStop(d,b)}};k.recursiveSetLoop=
function(a,b,c,d){null==d&&(d=!0);if(e.__instanceof(a,m))if(d)e.__cast(a,m).set_loop(b);else if(e.__cast(a,m).loop!=b)e.__cast(a,m).set_loop(b);else return;for(var f=0,g=a.children;f<g.length;){var h=g[f];++f;if(e.__instanceof(h,PIXI.Container)){if(null!=c){d=!1;for(var l=0;l<c.length;){var n=c[l];++l;if(e.__instanceof(a,m)&&null==h.name&&-1!=k.getLayerName(h).indexOf(n)||null!=h.name&&-1!=h.name.indexOf(n)){d=!0;break}}if(d)continue}k.recursiveSetLoop(h,b,c)}}};k.updateLayerInstanceRelativePos=function(a,
b,c){var d=a.getChildAt(0),f=new K;a.toLocal(new K(b,c),a.parent,f);d.x=f.x;d.y=f.y};k.setLayerXY=function(a,b,c){var d=a.getChildAt(0);d.x=(b-a.x)/a.scale.x;d.y=(c-a.y)/a.scale.y};k.setLayerX=function(a,b){b-=a.x;a.getChildAt(0).x=b/a.scale.x};k.setLayerY=function(a,b){b-=a.y;a.getChildAt(0).y=b/a.scale.y};k.getLayerX=function(a){return a.getChildAt(0).x*a.scale.x+a.x};k.getLayerY=function(a){return a.getChildAt(0).y*a.scale.y+a.y};k.getLayerXY=function(a){var b=a.getChildAt(0);return new K(b.x*
a.scale.x+a.x,b.y*a.scale.y+a.y)};k.recursiveApplyMask=function(a){if(e.__instanceof(a,m)){var b=k.getLayersWithPrefixInMovie("mask",a);for(var c=0;c<b.length;){var d=b[c];++c;k.setBoxMask(k.getLayer(d.name,a))}}b=0;for(a=a.children;b<a.length;)c=a[b],++b,e.__instanceof(c,PIXI.Container)&&k.recursiveApplyMask(c)};k.setBoxMask=function(a){var b=a.parent,c=b.getChildAt(b.getChildIndex(a)-1);b=b.addChildAt(new PIXI.Graphics,b.getChildIndex(a));var d=t.getParentBounds(a);b.x=a.x;b.y=a.y;b.beginFill(0,
1);b.drawRect(d.x-a.x,d.y-a.y,d.width,d.height);b.endFill();c.mask=b;a.visible=!1;return b};k.recursiveRemoveMask=function(a){if(e.__instanceof(a,m))for(var b=0,c=a.children;b<c.length;){var d=c[b];++b;null!=d.mask&&(a.removeChild(d.mask).destroy(),d.mask=null)}b=0;for(a=a.children;b<a.length;)c=a[b],++b,e.__instanceof(c,PIXI.Container)&&k.recursiveRemoveMask(c)};k.createFullscreenBt=function(a){a=new aa(a,k.onBtFullscreen);"0"==h.instance.vars.f&&a.hide();return a};k.onBtFullscreen=function(a){fullScreenApi.supportsFullScreen&&
(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(window.document.documentElement))};k.getLayerWithPrefixInSymbol=function(a,b,c){null==c&&(c=!1);var d=0;for(b=b.layers;d<b.length;){var f=b[d];++d;if(c){if(f.name==a)return f}else if(0==f.name.indexOf(a))return f}return null};k.getLayersWithPrefixInSymbol=function(a,b){var c=[],d=0;for(b=b.layers;d<b.length;){var f=b[d];++d;0==f.name.indexOf(a)&&c.push(f)}return c};var t=function(){};t.__name__=!0;t.toLocalRect=
function(a,b){var c=a.getLocalBounds(),d=new K,f=new K;b.toLocal(new K(c.x,c.y),a,d);b.toLocal(new K(c.x+c.width,c.y+c.height),a,f);c.x=Math.min(d.x,f.x);c.y=Math.min(d.y,f.y);c.width=Math.max(d.x,f.x)-c.x;c.height=Math.max(d.y,f.y)-c.y;return c};t.getLocalBounds=function(a){var b=a.getLocalBounds();e.__instanceof(a,PIXI.Container)&&(b.width=e.__cast(a,PIXI.Container).width/Math.abs(a.scale.x),b.height=e.__cast(a,PIXI.Container).height/Math.abs(a.scale.y));return b};t.getParentBounds=function(a,b){b=
null==b?t.getLocalBounds(a):b;b.x=a.x+(0<=a.scale.x?b.x*a.scale.x:(b.x+b.width)*a.scale.x);b.width*=Math.abs(a.scale.x);b.y=a.y+(0<=a.scale.y?b.y*a.scale.y:(b.y+b.height)*a.scale.y);b.height*=Math.abs(a.scale.y);return b};t.getContentBounds=function(a,b,c){c=null==c?h.instance.getContent():c;for(b=null==b?t.getLocalBounds(a):b;a!=c;)t.getParentBounds(a,b),a=a.parent;return b};t.contentToChild=function(a,b){for(var c=[],d=h.instance.getContent(),f;a!=d;)c.push([new K(a.x,a.y),new K(a.scale.x,a.scale.y)]),
0!=a.rotation&&c[c.length-1].push(new K(Math.cos(a.rotation),Math.sin(a.rotation))),a=a.parent;for(a=c.length-1;0<=a;)2<c[a].length?(d=b.x,f=b.y,b.x=(d*c[a][2].x+f*c[a][2].y-c[a][0].x*c[a][2].x-c[a][0].y*c[a][2].y)/c[a][1].x,b.y=(f*c[a][2].x-d*c[a][2].y+c[a][0].x*c[a][2].y-c[a][0].y*c[a][2].x)/c[a][1].y):(b.x=(b.x-c[a][0].x)/c[a][1].x,b.y=(b.y-c[a][0].y)/c[a][1].y),--a;return b};t.childToContent=function(a,b){for(var c=h.instance.getContent(),d,f,e,g;a!=c;)0!=a.rotation?(d=Math.cos(a.rotation),f=
Math.sin(a.rotation),e=b.x*a.scale.x,g=b.y*a.scale.y,b.x=e*d-g*f+a.x,b.y=e*f+g*d+a.y):(b.x=b.x*a.scale.x+a.x,b.y=b.y*a.scale.y+a.y),a=a.parent;return b};t.childToChild=function(a,b,c){return t.contentToChild(b,t.childToContent(a,c))};t.addPt=function(a,b){a.x+=b.x;a.y+=b.y;return a};t.subPt=function(a,b){return new K(a.x-b.x,a.y-b.y)};t.intersects=function(a,b){return a.x<=b.x+b.width&&b.x<=a.x+a.width&&a.y<=b.y+b.height?b.y<=a.y+a.height:!1};t.isPtInRect=function(a,b,c,d){null==d&&(d=0);return a>=
c.x-d&&a<=c.x+c.width+d&&b>=c.y-d?b<=c.y+c.height+d:!1};t.isPtInRectExp=function(a,b,c,d){return 0>=d?t.isPtInRect(a,b,c,d):a<c.x&&b<c.y?(a-c.x)*(a-c.x)+(b-c.y)*(b-c.y)<=d*d:a<c.x&&b>c.y+c.height?(a-c.x)*(a-c.x)+(b-c.y-c.height)*(b-c.y-c.height)<=d*d:a>c.x+c.width&&b<c.y?(a-c.x-c.width)*(a-c.x-c.width)+(b-c.y)*(b-c.y)<=d*d:a>c.x+c.width&&b>c.y+c.height?(a-c.x-c.width)*(a-c.x-c.width)+(b-c.y-c.height)*(b-c.y-c.height)<=d*d:t.isPtInRect(a,b,c,d)};t.center=function(a){a.x=-a.width/2;a.y=-a.height/2;
return a};t.fit=function(a,b){null==b&&(b=h.instance.getScreenRectExt());a.x=b.x;a.y=b.y;a.width=b.width;a.height=b.height;return a};t.setQuickBt=function(a,b){a.buttonMode=!0;a.interactive=!0;a.addListener("touchstart",t.onQuickBtTouch);a.addListener("mousedown",t.onQuickBtMouse);null==t.quickBtListeners&&(t.quickBtListeners=new U);t.quickBtListeners.set(a,b)};t.unsetQuickBt=function(a){a.removeAllListeners("touchstart");a.removeAllListeners("mousedown");a.buttonMode=!1;a.interactive=!1;t.quickBtListeners.remove(a)};
t.onQuickBtTouch=function(a){P.isOK()&&P.instance.forceCaptureDown(a,!1);t.callQuickListener(a)};t.onQuickBtMouse=function(a){P.isOK()&&P.instance.forceCaptureDown(a,!0);t.callQuickListener(a)};t.callQuickListener=function(a){for(var b=a.target;null!=b;){for(var c=t.quickBtListeners.keys();c.hasNext();){var d=c.next();if(d==b){t.quickBtListeners.h[d.__id__](a);return}}b=b.parent}h.instance.traceDebug("ERROR : UtilsPixi::callQuickListener : no registered listener found")};var y,rb=0;String.prototype.__class__=
String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var tb={__name__:["Int"]},sb={__name__:["Dynamic"]},qb=Number;qb.__name__=["Float"];var pb=Boolean;pb.__ename__=["Bool"];var ub={__name__:["Class"]},vb={},p={};(function(){(function(a){a(function(){var a={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},c=["webkit","moz","o","ms","khtml"];if("undefined"!=
typeof document.cancelFullScreen)a.supportsFullScreen=!0;else for(var d=0,e=c.length;d<e;d++)if(a.prefix=c[d],"undefined"!=typeof document[a.prefix+"CancelFullScreen"]){a.supportsFullScreen=!0;break}a.supportsFullScreen&&(a.fullScreenEventName=a.prefix+"fullscreenchange",a.isFullScreen=function(){switch(this.prefix){case "":return document.fullScreen;case "webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},a.requestFullScreen=function(a){return""===this.prefix?
a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},a.cancelFullScreen=function(a){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});return a})})(function(a){window.fullScreenApi=a()})})();T.AUTO="auto";T.RECOMMENDED="recommended";T.CANVAS="canvas";T.WEBGL="webgl";T.POSITION_STATIC="static";T.POSITION_ABSOLUTE="absolute";T.POSITION_FIXED="fixed";T.POSITION_RELATIVE="relative";T.POSITION_INITIAL="initial";T.POSITION_INHERIT="inherit";q.MEASUREMENT_INTERVAL=
1E3;q.FONT_FAMILY="Helvetica,Arial";q.FPS_BG_CLR="#00FF00";q.FPS_WARN_BG_CLR="#FF8000";q.FPS_PROB_BG_CLR="#FF0000";q.MS_BG_CLR="#FFFF00";q.MEM_BG_CLR="#086A87";q.INFO_BG_CLR="#00FFFF";q.FPS_TXT_CLR="#000000";q.MS_TXT_CLR="#000000";q.MEM_TXT_CLR="#FFFFFF";q.INFO_TXT_CLR="#000000";q.TOP_LEFT="TL";q.TOP_RIGHT="TR";q.BOTTOM_LEFT="BL";q.BOTTOM_RIGHT="BR";q.POS_SUFFIX="px";q.DELAY_TIME=4E3;V.TIME_ACCURACY_COEF=10;Aa.LABEL_ENTER="labelEnter";Aa.LABEL_EXIT="labelExit";Aa.LABEL_UPDATE="labelUpdate";U.count=
0;e.__toStr={}.toString;x.resources=new A;na.RENDER_FLUMP="flump";na.RENDER_DEFAULT="default";na.TYPE_FLUMP_MC="mc";na.TYPE_FLUMP_SP="sp";L.VOID_ASSET="asset_vide";ca.LOCKER_UNLOCKED="unlock_instance";ca.LOCKER_LOCKED="lock_instance";ca.LOCKER_UNDEFINED="lock_undefined";ca.MAP_NO="map_no";ca.MAP_YES="map_yes";ca.MAP_UNDEFINED="map_undefined";ea.FIND_ON_GROUP="findOnGroup";ea.FIND_ON_ID="findOnId";ea.FIND_ON_FILE="findOnFile";ea.FIND_ON_EXPORT="findOnExport";ea.MATCH_ALL="matchAll";ea.MATCH_SUBSTR=
"matchSubstr";v.VERSION_PARAM="v";W.NO_VERSION="NO-VERSION";W.VERSION_NO_CACHE="NO-CACHE";pa.ALIGN_CENTER="center";pa.ALIGN_RIGHT="right";pa.V_ALIGN_CENTER="center";pa.V_ALIGN_BOT="bot";P.DEFAULT_ID=421;aa.NAME_UP="up";aa.NAME_OVER="over";aa.NAME_DOWN="down";aa.NAME_SELECT="select";aa.NAME_SELECT_DOWN="selectDown";aa.NAME_SELECT_OVER="selectOver";aa.NAME_DISABLE="disable";k.LAYER_CLONE_AFFIX="vegaClone";ya.main()})("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=
typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
