(function(q,n){function f(c,b){if(null==b)return null;null==b.__id__&&(b.__id__=p++);var a;null==c.hx__closures__?c.hx__closures__={}:a=c.hx__closures__[b.__id__];null==a&&(a=function(){return a.method.apply(a.scope,arguments)},a.scope=c,a.method=b,c.hx__closures__[b.__id__]=a);return a}var d=n.Perf=function(c,b){null==b&&(b=0);null==c&&(c="TR");var a=this;this._divElements=[];this._perfObj=window.performance;null!=g.field(this._perfObj,"memory")&&(this._memoryObj=g.field(this._perfObj,"memory"));
this._memCheck=null!=this._perfObj&&null!=this._memoryObj&&0<this._memoryObj.totalJSHeapSize;this._pos=c;this._offset=b;this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=this._fpsMin=60;null!=this._perfObj&&null!=(e=this._perfObj,f(e,e.now))?this._startTime=this._perfObj.now():this._startTime=(new Date).getTime();this._prevTime=-d.MEASUREMENT_INTERVAL;this._createFpsDom();this._createMsDom();this._memCheck&&
this._createMemoryDom();var k=0,l=null;null!=(e=window,f(e,e.requestAnimationFrame))?this.RAF=(e=window,f(e,e.requestAnimationFrame)):this.RAF=function(b){var c;c=null!=a._perfObj&&null!=(e=a._perfObj,f(e,e.now))?a._perfObj.now():(new Date).getTime();var d=m["int"](Math.max(0,16-(c-k)));l=h.delay(function(){b(c+d)},d);k=c+d;return l};null!=(e=window,f(e,e.cancelAnimationFrame))?this.CAF=(e=window,f(e,e.cancelAnimationFrame)):this.CAF=function(a){null!=a&&a.stop()};null!=this.RAF&&(this._raf=g.callMethod(window,
this.RAF,[f(this,this._tick)]))};d.prototype={_init:function(){this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=this._fpsMin=60;null!=this._perfObj&&null!=(e=this._perfObj,f(e,e.now))?this._startTime=this._perfObj.now():this._startTime=(new Date).getTime();this._prevTime=-d.MEASUREMENT_INTERVAL},_now:function(){return null!=this._perfObj&&null!=(e=this._perfObj,f(e,e.now))?this._perfObj.now():
(new Date).getTime()},_tick:function(c){var b;b=null!=this._perfObj&&null!=(e=this._perfObj,f(e,e.now))?this._perfObj.now():(new Date).getTime();this._ticks++;null!=this._raf&&b>this._prevTime+d.MEASUREMENT_INTERVAL&&(this.currentMs=Math.round(b-this._startTime),this.ms.innerHTML="MS: "+this.currentMs,this.currentFps=Math.round(1E3*this._ticks/(b-this._prevTime)),60<this.currentFps&&(this.currentFps=60),0<this.currentFps&&c>d.DELAY_TIME&&(this._measureCount++,this._totalFps+=this.currentFps,this.lowFps=
this._fpsMin=Math.min(this._fpsMin,this.currentFps),this._fpsMax=Math.max(this._fpsMax,this.currentFps),this.avgFps=Math.round(this._totalFps/this._measureCount)),this.fps.innerHTML="FPS: "+this.currentFps+" ("+this._fpsMin+"-"+this._fpsMax+")",this.fps.style.backgroundColor=30<=this.currentFps?d.FPS_BG_CLR:15<=this.currentFps?d.FPS_WARN_BG_CLR:d.FPS_PROB_BG_CLR,this._prevTime=b,this._ticks=0,this._memCheck&&(this.currentMem=this._getFormattedSize(this._memoryObj.usedJSHeapSize,2),this.memory.innerHTML=
"MEM: "+this.currentMem));this._startTime=b;null!=this._raf&&(this._raf=g.callMethod(window,this.RAF,[f(this,this._tick)]))},_createDiv:function(c,b){null==b&&(b=0);var a;a=window.document.createElement("div");a.id=c;a.className=c;a.style.position="absolute";switch(this._pos){case "TL":a.style.left=this._offset+"px";a.style.top=b+"px";break;case "TR":a.style.right=this._offset+"px";a.style.top=b+"px";break;case "BL":a.style.left=this._offset+"px";a.style.bottom=(this._memCheck?48:32)-b+"px";break;
case "BR":a.style.right=this._offset+"px",a.style.bottom=(this._memCheck?48:32)-b+"px"}a.style.width="80px";a.style.height="12px";a.style.lineHeight="12px";a.style.padding="2px";a.style.fontFamily=d.FONT_FAMILY;a.style.fontSize="9px";a.style.fontWeight="bold";a.style.textAlign="center";window.document.body.appendChild(a);this._divElements.push(a);return a},_createFpsDom:function(){this.fps=this._createDiv("fps");this.fps.style.backgroundColor=d.FPS_BG_CLR;this.fps.style.zIndex="995";this.fps.style.color=
d.FPS_TXT_CLR;this.fps.innerHTML="FPS: 0"},_createMsDom:function(){this.ms=this._createDiv("ms",16);this.ms.style.backgroundColor=d.MS_BG_CLR;this.ms.style.zIndex="996";this.ms.style.color=d.MS_TXT_CLR;this.ms.innerHTML="MS: 0"},_createMemoryDom:function(){this.memory=this._createDiv("memory",32);this.memory.style.backgroundColor=d.MEM_BG_CLR;this.memory.style.color=d.MEM_TXT_CLR;this.memory.style.zIndex="997";this.memory.innerHTML="MEM: 0"},_getFormattedSize:function(c,b){null==b&&(b=0);if(0==c)return"0";
var a=Math.pow(10,b),d=Math.floor(Math.log(c)/Math.log(1024));return Math.round(c*a/Math.pow(1024,d))/a+" "+["Bytes","KB","MB","GB","TB"][d]},addInfo:function(c){this.info=this._createDiv("info",this._memCheck?48:32);this.info.style.backgroundColor=d.INFO_BG_CLR;this.info.style.color=d.INFO_TXT_CLR;this.info.style.zIndex="998";this.info.innerHTML=c},clearInfo:function(){null!=this.info&&(window.document.body.removeChild(this.info),this.info=null)},destroy:function(){g.callMethod(window,this.CAF,[this._raf]);
this._memoryObj=this._perfObj=this._raf=null;null!=this.fps&&(window.document.body.removeChild(this.fps),this.fps=null);null!=this.ms&&(window.document.body.removeChild(this.ms),this.ms=null);null!=this.memory&&(window.document.body.removeChild(this.memory),this.memory=null);this.clearInfo();this.currentFps=60;this.currentMs=0;this.currentMem="0";this.avgFps=this.lowFps=60;this._ticks=this._time=this._totalFps=this._measureCount=0;this._fpsMax=this._fpsMin=60;null!=this._perfObj&&null!=(e=this._perfObj,
f(e,e.now))?this._startTime=this._perfObj.now():this._startTime=(new Date).getTime();this._prevTime=-d.MEASUREMENT_INTERVAL},hide:function(){for(var c=0,b=this._divElements;c<b.length;){var a=b[c];++c;a.style.visibility="hidden"}},show:function(){for(var c=0,b=this._divElements;c<b.length;){var a=b[c];++c;a.style.visibility="visible"}},_cancelRAF:function(){g.callMethod(window,this.CAF,[this._raf]);this._raf=null}};var g=function(){};g.field=function(c,b){try{return c[b]}catch(a){return null}};g.callMethod=
function(c,b,a){return b.apply(c,a)};var m=function(){};m["int"]=function(c){return c|0};var h=function(c){var b=this;this.id=setInterval(function(){b.run()},c)};h.delay=function(c,b){var a=new h(b);a.run=function(){a.stop();c()};return a};h.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){}};var e,p=0;d.MEASUREMENT_INTERVAL=1E3;d.FONT_FAMILY="Helvetica,Arial";d.FPS_BG_CLR="#00FF00";d.FPS_WARN_BG_CLR="#FF8000";d.FPS_PROB_BG_CLR="#FF0000";d.MS_BG_CLR=
"#FFFF00";d.MEM_BG_CLR="#086A87";d.INFO_BG_CLR="#00FFFF";d.FPS_TXT_CLR="#000000";d.MS_TXT_CLR="#000000";d.MEM_TXT_CLR="#FFFFFF";d.INFO_TXT_CLR="#000000";d.TOP_LEFT="TL";d.TOP_RIGHT="TR";d.BOTTOM_LEFT="BL";d.BOTTOM_RIGHT="BR";d.DELAY_TIME=4E3})("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:exports);
